<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>LearnAI ‚Äî Smart Learning Platform</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#05050f;--s0:#080811;--s1:#0c0c18;--s2:#10101f;--s3:#161628;
  --border:#1a1a30;--border2:#252540;
  --accent:#818cf8;--a2:#34d399;--a3:#fb923c;--a4:#f472b6;--a5:#38bdf8;
  --text:#eeeef5;--muted:#52526e;--muted2:#8888a8;
  --success:#34d399;--danger:#f87171;--warn:#fbbf24;
  --grad:linear-gradient(135deg,#818cf8,#34d399);
  --grad2:linear-gradient(135deg,#818cf8,#fb923c);
  --grad3:linear-gradient(135deg,#f472b6,#818cf8);
  --r:18px;
  --font:'Inter',sans-serif;
  --font-display:'Syne',sans-serif;
  --font-mono:'JetBrains Mono',monospace;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--font);min-height:100vh;overflow-x:hidden}

/* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
::-webkit-scrollbar{width:4px;height:4px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:99px}

/* ‚îÄ‚îÄ CURSOR GLOW ‚îÄ‚îÄ */
#cursor-glow{position:fixed;pointer-events:none;z-index:9999;width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(129,140,248,.06),transparent 70%);transform:translate(-50%,-50%);transition:opacity .3s;top:0;left:0}

/* ‚îÄ‚îÄ BACKGROUND ‚îÄ‚îÄ */
#bgc{position:fixed;inset:0;z-index:0;pointer-events:none}
.aurora{position:fixed;pointer-events:none;z-index:0;border-radius:50%;filter:blur(80px);animation:auroraDrift 20s ease-in-out infinite}
.aurora-1{width:700px;height:700px;background:radial-gradient(circle,rgba(129,140,248,.07),transparent 70%);top:-200px;left:-200px;animation-duration:25s}
.aurora-2{width:600px;height:600px;background:radial-gradient(circle,rgba(52,211,153,.05),transparent 70%);bottom:-150px;right:-150px;animation-duration:30s;animation-delay:-8s}
.aurora-3{width:400px;height:400px;background:radial-gradient(circle,rgba(244,114,182,.04),transparent 70%);top:40%;left:40%;animation-duration:20s;animation-delay:-4s}
@keyframes auroraDrift{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(40px,30px) scale(1.05)}66%{transform:translate(-30px,20px) scale(.95)}}

/* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
.site-header{position:relative;z-index:10;padding:3.5rem 1.5rem 2rem;text-align:center;border-bottom:1px solid var(--border)}
.header-inner{max-width:900px;margin:0 auto}
.logo-mark{display:inline-flex;align-items:center;gap:14px;margin-bottom:14px}
.logo-icon{width:54px;height:54px;border-radius:16px;background:linear-gradient(135deg,#818cf8,#34d399);display:flex;align-items:center;justify-content:center;font-size:26px;box-shadow:0 0 0 1px rgba(129,140,248,.3),0 0 40px rgba(129,140,248,.25);animation:iconPulse 4s ease-in-out infinite}
@keyframes iconPulse{0%,100%{box-shadow:0 0 0 1px rgba(129,140,248,.3),0 0 40px rgba(129,140,248,.25)}50%{box-shadow:0 0 0 1px rgba(129,140,248,.5),0 0 70px rgba(129,140,248,.4)}}
.site-title{font-family:var(--font-display);font-size:clamp(2.2rem,5vw,3.8rem);font-weight:800;letter-spacing:-.04em;background:linear-gradient(135deg,#fff 0%,var(--accent) 50%,var(--a2) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1}
.site-tag{font-size:.95rem;color:var(--muted2);font-weight:400;max-width:540px;margin:.6rem auto 0;line-height:1.6}

/* ‚îÄ‚îÄ XP BAR ‚îÄ‚îÄ */
.xp-bar-row{display:flex;align-items:center;justify-content:center;gap:12px;margin-top:20px;flex-wrap:wrap}
.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:99px;font-size:.8rem;font-weight:600;border:1px solid}
.badge-xp{background:rgba(129,140,248,.1);border-color:rgba(129,140,248,.25);color:var(--accent)}
.badge-streak{background:rgba(251,191,36,.08);border-color:rgba(251,191,36,.2);color:var(--warn)}
.badge-level{background:rgba(52,211,153,.08);border-color:rgba(52,211,153,.2);color:var(--a2)}
.xp-track{width:180px;height:5px;background:var(--border);border-radius:99px;overflow:hidden}
.xp-fill{height:100%;border-radius:99px;background:var(--grad);transition:width .8s cubic-bezier(.4,0,.2,1)}

/* ‚îÄ‚îÄ NAV ‚îÄ‚îÄ */
.top-nav{position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:center;flex-wrap:wrap;gap:3px;padding:7px 14px;background:rgba(5,5,15,.88);backdrop-filter:blur(24px) saturate(1.8);border-bottom:1px solid var(--border)}
.nav-pill{display:inline-flex;align-items:center;gap:6px;padding:7px 14px;border-radius:9px;border:none;font-family:var(--font);font-size:.82rem;font-weight:500;color:var(--muted);background:transparent;cursor:pointer;transition:all .18s;white-space:nowrap}
.nav-pill:hover{color:var(--text);background:rgba(255,255,255,.04)}
.nav-pill.active{background:var(--s2);color:var(--text);box-shadow:0 0 0 1px var(--border2)}
.nav-pill .dot{width:5px;height:5px;border-radius:50%;background:var(--muted);transition:all .2s;flex-shrink:0}
.nav-pill.active .dot{background:var(--accent);box-shadow:0 0 6px var(--accent)}
.nav-sep{width:1px;height:18px;background:var(--border);margin:0 2px}
#user-info{display:none;align-items:center;gap:8px}
#user-greet{font-size:.78rem;color:var(--muted2);font-weight:500}

/* ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ */
.page{display:none;position:relative;z-index:1;animation:pgIn .3s ease}
.page.active{display:block}
@keyframes pgIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.inner{max-width:1140px;margin:0 auto;padding:2rem 24px 6rem}

/* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
.card{background:var(--s1);border:1px solid var(--border);border-radius:var(--r);padding:26px;margin-bottom:18px;position:relative;overflow:hidden;transition:border-color .25s}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(129,140,248,.35),transparent)}
.card:hover{border-color:var(--border2)}
.card-title{font-family:var(--font-display);font-size:1.35rem;font-weight:700;margin-bottom:20px;display:flex;align-items:center;gap:10px}
.ico{width:32px;height:32px;border-radius:9px;font-size:15px;display:flex;align-items:center;justify-content:center;background:rgba(129,140,248,.12);border:1px solid rgba(129,140,248,.2);flex-shrink:0}

/* ‚îÄ‚îÄ HERO STATS ‚îÄ‚îÄ */
.hero-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:24px}
@media(max-width:700px){.hero-grid{grid-template-columns:repeat(2,1fr)}}
.hero-stat{background:var(--s1);border:1px solid var(--border);border-radius:16px;padding:18px;text-align:center;position:relative;overflow:hidden;transition:all .3s;cursor:default}
.hero-stat::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(129,140,248,.3),transparent)}
.hero-stat:hover{transform:translateY(-3px);border-color:rgba(129,140,248,.2);box-shadow:0 10px 30px rgba(0,0,0,.3)}
.hs-val{font-family:var(--font-display);font-size:2.1rem;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;line-height:1}
.hs-lbl{font-size:.68rem;color:var(--muted);margin-top:5px;text-transform:uppercase;letter-spacing:.08em}

/* ‚îÄ‚îÄ INPUTS & BUTTONS ‚îÄ‚îÄ */
input,textarea,select{background:var(--s2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-family:var(--font);font-size:.9rem;padding:10px 14px;outline:none;width:100%;transition:all .2s}
input:focus,textarea:focus,select:focus{border-color:rgba(129,140,248,.45);box-shadow:0 0 0 3px rgba(129,140,248,.08)}
input::placeholder,textarea::placeholder{color:var(--muted)}
label{display:block;font-size:.7rem;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:.1em;margin-bottom:6px}
.btn{border:none;border-radius:10px;font-family:var(--font);font-size:.88rem;font-weight:600;padding:10px 20px;cursor:pointer;transition:all .18s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,var(--accent),#6366f1);color:#fff;box-shadow:0 4px 18px rgba(129,140,248,.28)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 8px 26px rgba(129,140,248,.45)}
.btn-primary:active{transform:translateY(0)}
.btn-secondary{background:var(--s2);color:var(--text);border:1px solid var(--border)}
.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}
.btn-success{background:rgba(52,211,153,.12);color:var(--success);border:1px solid rgba(52,211,153,.22)}
.btn-success:hover{background:rgba(52,211,153,.22)}
.btn-cyan{background:rgba(56,189,248,.12);color:var(--a5);border:1px solid rgba(56,189,248,.22)}
.btn-cyan:hover{background:rgba(56,189,248,.22)}
.btn-danger{background:rgba(248,113,113,.08);color:var(--danger);border:1px solid rgba(248,113,113,.18);padding:5px 10px;font-size:.78rem}
.btn-danger:hover{background:rgba(248,113,113,.18)}
.btn-sm{padding:6px 13px;font-size:.79rem}

/* ‚îÄ‚îÄ SUBJECTS ‚îÄ‚îÄ */
.add-row{display:grid;grid-template-columns:1fr 100px 110px auto;gap:10px;align-items:end;margin-top:14px}
@media(max-width:600px){.add-row{grid-template-columns:1fr 1fr}.add-row .btn{grid-column:1/-1}}
.sub-row{display:flex;align-items:center;padding:11px 15px;border:1px solid var(--border);border-radius:12px;margin-bottom:7px;background:var(--s2);transition:all .2s;animation:slideIn .3s ease}
@keyframes slideIn{from{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}
.sub-row:hover{border-color:rgba(129,140,248,.28)}
.sub-name{flex:1;font-weight:500;font-size:.9rem}
.grade-badge{font-family:var(--font-mono);font-size:.76rem;padding:3px 10px;border-radius:6px;font-weight:500;margin-right:10px}
.gA{background:rgba(52,211,153,.12);color:var(--success);border:1px solid rgba(52,211,153,.2)}
.gB{background:rgba(56,189,248,.12);color:var(--a5);border:1px solid rgba(56,189,248,.2)}
.gC{background:rgba(251,191,36,.12);color:var(--warn);border:1px solid rgba(251,191,36,.2)}
.gD{background:rgba(248,113,113,.12);color:var(--danger);border:1px solid rgba(248,113,113,.2)}
.gF{background:rgba(248,113,113,.18);color:var(--danger);border:1px solid rgba(248,113,113,.3)}

/* ‚îÄ‚îÄ GRID / SECTIONS ‚îÄ‚îÄ */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
@media(max-width:640px){.grid-2{grid-template-columns:1fr}}
.stats-bar{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:20px}
.stat-box{background:var(--s2);border:1px solid var(--border);border-radius:12px;padding:16px;text-align:center}
.stat-val{font-family:var(--font-display);font-size:1.9rem;font-weight:800;background:var(--grad);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.stat-lbl{font-size:.68rem;color:var(--muted);margin-top:3px;text-transform:uppercase;letter-spacing:.07em}
.sec-head{margin:2.5rem 0 1.3rem;display:flex;align-items:center;gap:14px}
.sec-head h2{font-family:var(--font-display);font-size:1.75rem;font-weight:800;letter-spacing:-.03em;white-space:nowrap}
.sec-rule{flex:1;height:1px;background:linear-gradient(90deg,var(--border2),transparent)}
.div{height:1px;background:var(--border);margin:18px 0}
.empty{text-align:center;padding:36px;color:var(--muted)}
.empty .e-ico{font-size:2.4rem;margin-bottom:8px}

/* ‚îÄ‚îÄ SCHEDULE TABLE ‚îÄ‚îÄ */
.sched-table{width:100%;border-collapse:collapse;font-size:.85rem}
.sched-table th{background:var(--s2);color:var(--muted);font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;padding:9px 13px;border-bottom:1px solid var(--border);text-align:left}
.sched-table td{padding:10px 13px;border-bottom:1px solid var(--border)}
.sched-table tr:last-child td{border-bottom:none}
.chart-wrap{position:relative;height:240px;margin-top:20px}

/* ‚îÄ‚îÄ COURSES ‚îÄ‚îÄ */
.course-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(310px,1fr));gap:16px}
@media(max-width:768px){.course-grid{grid-template-columns:1fr}}
.course-card{background:var(--s1);border:1px solid var(--border);border-radius:var(--r);overflow:hidden;transition:all .3s;position:relative;display:flex;flex-direction:column}
.course-card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,rgba(129,140,248,.25),transparent);z-index:1}
.course-card:hover{transform:translateY(-6px);box-shadow:0 24px 48px rgba(0,0,0,.5);border-color:rgba(129,140,248,.3)}
.course-card.done{border-color:rgba(52,211,153,.25)}
.done-badge{display:none;position:absolute;top:9px;right:9px;z-index:5;background:rgba(52,211,153,.15);color:var(--success);border:1px solid rgba(52,211,153,.28);padding:3px 10px;border-radius:99px;font-size:.71rem;font-weight:600}
.course-card.done .done-badge{display:block}
.vid-thumb{position:relative;width:100%;padding-bottom:56.25%;background:#000;cursor:pointer;overflow:hidden;flex-shrink:0}
.vid-thumb img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;transition:transform .4s,filter .3s}
.course-card:hover .vid-thumb img{transform:scale(1.04);filter:brightness(.82)}
.play-btn{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.25);transition:background .25s}
.play-btn:hover{background:rgba(0,0,0,.45)}
.play-circle{width:54px;height:54px;border-radius:50%;background:rgba(129,140,248,.9);display:flex;align-items:center;justify-content:center;font-size:18px;box-shadow:0 4px 20px rgba(129,140,248,.6);transition:transform .2s;padding-left:3px}
.play-btn:hover .play-circle{transform:scale(1.1)}
.vid-dur{position:absolute;bottom:7px;right:7px;background:rgba(0,0,0,.72);color:#fff;font-size:.68rem;font-family:var(--font-mono);padding:2px 6px;border-radius:4px}
.course-body{padding:16px 18px 0;flex:1}
.level-chip{display:inline-block;background:rgba(129,140,248,.12);color:var(--accent);border:1px solid rgba(129,140,248,.2);padding:3px 10px;border-radius:99px;font-size:.73rem;font-weight:600;letter-spacing:.03em;margin-bottom:8px}
.level-hot{background:rgba(251,191,36,.1);color:var(--warn);border-color:rgba(251,191,36,.22)}
.level-new{background:rgba(244,114,182,.1);color:var(--a4);border-color:rgba(244,114,182,.22)}
.course-card h3{font-family:var(--font-display);font-size:1.18rem;font-weight:700;color:var(--text);margin-bottom:5px}
.course-card p{color:var(--muted);font-size:.84rem;line-height:1.55}
.course-meta{display:flex;gap:10px;margin-top:8px;flex-wrap:wrap}
.course-meta span{font-size:.7rem;color:var(--muted);display:flex;align-items:center;gap:3px}
.course-actions{padding:12px 18px 16px;display:flex;flex-direction:column;gap:7px}
.search-bar{position:relative;margin-bottom:20px}
.search-bar input{padding:12px 42px 12px 46px}
.search-icon{position:absolute;left:15px;top:50%;transform:translateY(-50%);font-size:1rem;pointer-events:none}
.search-clear{position:absolute;right:13px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--muted);cursor:pointer;font-size:1rem;display:none}
.filter-pills{display:flex;gap:7px;flex-wrap:wrap;margin-bottom:18px}
.fpill{padding:5px 13px;border-radius:99px;border:1px solid var(--border);background:transparent;color:var(--muted);font-family:var(--font);font-size:.76rem;font-weight:500;cursor:pointer;transition:all .18s}
.fpill:hover{border-color:rgba(129,140,248,.3);color:var(--text)}
.fpill.on{background:rgba(129,140,248,.12);border-color:rgba(129,140,248,.32);color:var(--accent)}

/* ‚îÄ‚îÄ QUIZ ‚îÄ‚îÄ */
.qx-q{font-size:1rem;font-weight:500;line-height:1.65;margin-bottom:18px;padding:16px;background:var(--s2);border-radius:12px;border-left:3px solid var(--accent)}
.qx-opts{display:grid;grid-template-columns:1fr 1fr;gap:9px;margin-bottom:14px}
@media(max-width:600px){.qx-opts{grid-template-columns:1fr}}
.qx-opt{padding:11px 15px;border:1px solid var(--border);border-radius:10px;background:var(--s2);color:var(--text);font-family:var(--font);font-size:.86rem;cursor:pointer;transition:all .18s;text-align:left}
.qx-opt:hover{border-color:var(--accent);background:rgba(129,140,248,.07)}
.qx-opt.correct{background:rgba(52,211,153,.1);border-color:var(--success);color:var(--success)}
.qx-opt.wrong{background:rgba(248,113,113,.1);border-color:var(--danger);color:var(--danger)}
.qx-opt.rtl{text-align:right;direction:rtl}
.qx-q.rtl{direction:rtl;text-align:right;border-left:none;border-right:3px solid var(--accent)}
.qx-score{font-family:var(--font-mono);font-size:.8rem;color:var(--muted);margin-bottom:14px}

/* ‚îÄ‚îÄ FLASHCARDS ‚îÄ‚îÄ */
.fc-scene{perspective:1400px;height:220px;margin:20px 0;cursor:pointer;user-select:none}
.fc-card{position:relative;width:100%;height:100%;transform-style:preserve-3d;transition:transform .6s cubic-bezier(.4,0,.2,1)}
.fc-card.flipped{transform:rotateY(180deg)}
.fc-face{position:absolute;inset:0;backface-visibility:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:24px;border-radius:16px;border:1px solid var(--border)}
.fc-front{background:linear-gradient(135deg,var(--s2),rgba(129,140,248,.08));border-color:rgba(129,140,248,.25)}
.fc-back{background:linear-gradient(135deg,var(--s2),rgba(52,211,153,.08));border-color:rgba(52,211,153,.25);transform:rotateY(180deg)}
.fc-lbl{font-size:.64rem;text-transform:uppercase;letter-spacing:.14em;color:var(--muted);margin-bottom:10px}
.fc-txt{font-size:1.05rem;font-weight:500;text-align:center;line-height:1.55}
.fc-txt.rtl{direction:rtl;text-align:right}
.fc-hint{font-size:.68rem;color:var(--muted);margin-top:12px}
.fc-nav{display:flex;align-items:center;gap:12px;justify-content:center;margin-top:8px}
.fc-ctr{font-family:var(--font-mono);font-size:.8rem;color:var(--muted)}
.prog-bar{height:4px;background:var(--border);border-radius:99px;overflow:hidden}
.prog-fill{height:100%;border-radius:99px;background:var(--grad);transition:width .5s ease}

/* ‚îÄ‚îÄ POMODORO ‚îÄ‚îÄ */
.pom-wrap{text-align:center;padding:20px 16px}
.pom-ring-el{width:190px;height:190px;margin:0 auto 18px;position:relative}
.pom-ring-el svg{transform:rotate(-90deg)}
.pom-track{fill:none;stroke:var(--border);stroke-width:7}
.pom-prog{fill:none;stroke:url(#pomG);stroke-width:7;stroke-linecap:round;transition:stroke-dashoffset 1s linear}
.pom-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.pom-time{font-family:var(--font-display);font-size:2.5rem;font-weight:800;background:linear-gradient(135deg,#fff,var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.pom-lbl{font-size:.65rem;text-transform:uppercase;letter-spacing:.14em;color:var(--muted)}
.pom-ctrls{display:flex;justify-content:center;gap:10px;margin-bottom:22px}
.pom-dots{display:flex;justify-content:center;gap:8px;margin-top:14px}
.pom-dot{width:10px;height:10px;border-radius:50%;background:var(--border);transition:all .3s}
.pom-dot.done{background:var(--accent);box-shadow:0 0 8px var(--accent)}

/* ‚îÄ‚îÄ GOALS ‚îÄ‚îÄ */
.goal-row{display:flex;align-items:center;gap:10px;padding:11px 13px;border:1px solid var(--border);border-radius:10px;margin-bottom:7px;background:var(--s2);animation:slideIn .3s ease;transition:border-color .2s}
.goal-row:hover{border-color:rgba(129,140,248,.22)}
.g-chk{width:21px;height:21px;border-radius:6px;border:2px solid var(--border);cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;transition:all .2s}
.g-chk.on{background:var(--accent);border-color:var(--accent)}
.g-chk.on::after{content:'‚úì';color:#fff;font-size:10px;font-weight:700}
.g-txt{flex:1;font-size:.88rem}
.g-txt.done{text-decoration:line-through;color:var(--muted)}

/* ‚îÄ‚îÄ SUMMARY / AI ‚îÄ‚îÄ */
#sum-out{margin-top:14px;padding:18px;background:var(--s2);border-radius:12px;border:1px solid var(--border);font-size:.9rem;line-height:1.8;white-space:pre-wrap;min-height:40px}
.terms{display:flex;flex-wrap:wrap;gap:7px;margin-top:14px}
.term{background:rgba(129,140,248,.1);border:1px solid rgba(129,140,248,.22);color:var(--accent);font-family:var(--font-mono);font-size:.72rem;padding:3px 9px;border-radius:6px;cursor:default;transition:all .18s}
.term:hover{background:rgba(129,140,248,.22)}
.ai-bub{background:var(--s2);border:1px solid var(--border);border-radius:12px 12px 12px 4px;padding:13px 16px;font-size:.86rem;line-height:1.7;margin-top:12px;animation:fadeUp .35s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(7px)}to{opacity:1;transform:translateY(0)}}
.ai-lbl{font-size:.64rem;text-transform:uppercase;letter-spacing:.13em;color:var(--accent);margin-bottom:7px;font-weight:700}
.lang-badge{display:inline-flex;align-items:center;gap:5px;background:rgba(251,191,36,.08);border:1px solid rgba(251,191,36,.2);color:var(--warn);border-radius:99px;padding:3px 10px;font-size:.7rem;font-weight:600;margin-bottom:10px}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal{position:fixed;inset:0;background:rgba(5,5,15,.92);display:none;align-items:center;justify-content:center;z-index:3000;padding:1rem}
.modal.open{display:flex}
.modal-box{background:var(--s1);border:1px solid var(--border);border-radius:22px;width:100%;max-width:680px;max-height:92vh;overflow-y:auto;box-shadow:0 40px 80px rgba(0,0,0,.7);animation:modalPop .28s cubic-bezier(.34,1.56,.64,1)}
@keyframes modalPop{from{opacity:0;transform:scale(.93)}to{opacity:1;transform:scale(1)}}
.modal-hd{padding:1.3rem 1.8rem;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.modal-hd h2{font-family:var(--font-display);font-size:1.4rem;font-weight:800;color:var(--accent)}
.modal-close{background:none;border:none;font-size:1.6rem;color:var(--muted);cursor:pointer;line-height:1;transition:color .2s}
.modal-close:hover{color:var(--text)}
.modal-body{padding:1.6rem 1.8rem}
.modal-input{background:var(--s2);border:1px solid var(--border);border-radius:10px;color:var(--text);font-family:var(--font);font-size:.92rem;padding:10px 13px;width:100%;margin-bottom:11px;outline:none;transition:all .2s}
.modal-input:focus{border-color:rgba(129,140,248,.45);box-shadow:0 0 0 3px rgba(129,140,248,.08)}
.m-opt{padding:11px 15px;background:var(--s2);border:2px solid transparent;border-radius:10px;cursor:pointer;font-size:.92rem;font-family:var(--font);color:var(--text);transition:all .18s;display:block;width:100%;text-align:left;margin-bottom:7px}
.m-opt:hover{background:var(--s3)}
.m-opt.sel{border-color:var(--accent);background:rgba(129,140,248,.08)}
#m-prog{font-size:.88rem;margin-bottom:9px;color:var(--accent);font-family:var(--font-mono);opacity:.8}
#m-qtext{font-size:1.08rem;line-height:1.55;margin-bottom:18px;font-weight:500}
.login-sep{text-align:center;color:var(--muted);font-size:.8rem;margin:14px 0;position:relative}
.login-sep::before{content:'';position:absolute;top:50%;left:0;right:0;height:1px;background:var(--border)}
.login-sep span{background:var(--s1);padding:0 11px;position:relative}

/* ‚îÄ‚îÄ PATHWAY ‚îÄ‚îÄ */
.pathway-banner{background:linear-gradient(135deg,rgba(129,140,248,.08),rgba(52,211,153,.05));border:1px solid rgba(129,140,248,.18);border-radius:16px;padding:24px;text-align:center;margin:24px 0}
.pathway-banner h3{font-family:var(--font-display);font-size:1.25rem;font-weight:800;margin-bottom:10px}
.pathway-banner p{color:var(--muted);font-size:.88rem;line-height:1.8}
.pa{color:var(--accent);font-weight:700}
.pa-arrow{color:var(--muted);margin:0 4px}

/* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
.toast{position:fixed;bottom:22px;left:50%;transform:translateX(-50%) translateY(60px);opacity:0;background:var(--s1);border:1px solid var(--border);border-radius:12px;padding:11px 20px;font-size:.83rem;box-shadow:0 8px 28px rgba(0,0,0,.5);z-index:9999;transition:all .3s;white-space:nowrap;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}

/* ‚îÄ‚îÄ LEADERBOARD ‚îÄ‚îÄ */
.lb-row{display:flex;align-items:center;gap:12px;padding:12px 15px;border:1px solid var(--border);border-radius:12px;margin-bottom:7px;background:var(--s2);transition:all .2s}
.lb-row:hover{border-color:rgba(129,140,248,.2)}
.lb-rank{font-family:var(--font-display);font-size:1.1rem;font-weight:800;width:30px;text-align:center;flex-shrink:0}
.lb-name{flex:1;font-weight:500;font-size:.9rem}
.lb-xp{font-family:var(--font-mono);font-size:.8rem;color:var(--accent)}
.lb-badge{font-size:.75rem;padding:2px 8px;border-radius:99px;background:rgba(129,140,248,.1);color:var(--accent);border:1px solid rgba(129,140,248,.2)}

/* ‚îÄ‚îÄ NOTES ‚îÄ‚îÄ */
.note-card{background:var(--s2);border:1px solid var(--border);border-radius:12px;padding:14px;margin-bottom:8px;cursor:pointer;transition:all .2s;animation:slideIn .3s ease}
.note-card:hover{border-color:rgba(129,140,248,.25)}
.note-title{font-weight:600;font-size:.9rem;margin-bottom:4px;display:flex;justify-content:space-between;align-items:center}
.note-preview{font-size:.8rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.note-date{font-family:var(--font-mono);font-size:.68rem;color:var(--muted)}

/* ‚îÄ‚îÄ TIMER MODES ‚îÄ‚îÄ */
.mode-pills{display:flex;gap:8px;justify-content:center;margin-bottom:16px;flex-wrap:wrap}
.mode-pill{padding:6px 14px;border-radius:99px;border:1px solid var(--border);background:transparent;color:var(--muted);font-family:var(--font);font-size:.78rem;font-weight:500;cursor:pointer;transition:all .2s}
.mode-pill.active{background:rgba(129,140,248,.12);border-color:rgba(129,140,248,.3);color:var(--accent)}

/* ‚îÄ‚îÄ PROGRESS RINGS ‚îÄ‚îÄ */
.ring-wrap{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;margin:16px 0}
.ring-item{text-align:center}
.ring-item svg{display:block;margin:0 auto}
.ring-label{font-size:.72rem;color:var(--muted);margin-top:6px;text-transform:uppercase;letter-spacing:.07em}
.ring-val{font-family:var(--font-display);font-size:1.1rem;font-weight:800}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
.site-footer{background:rgba(0,0,0,.4);border-top:1px solid var(--border);text-align:center;padding:1.8rem 1rem;color:var(--muted);font-size:.83rem;position:relative;z-index:1}
.site-footer strong{color:var(--accent)}

/* ‚îÄ‚îÄ VIDEO LIGHTBOX ‚îÄ‚îÄ */
#vbox{position:fixed;inset:0;background:rgba(0,0,0,.93);z-index:5000;display:none;align-items:center;justify-content:center;padding:1rem;animation:fadeIn .22s ease}
#vbox.open{display:flex}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.vbox-inner{width:100%;max-width:900px;position:relative}
.vbox-close{position:absolute;top:-42px;right:0;background:none;border:none;color:#fff;font-size:1.7rem;cursor:pointer;line-height:1;opacity:.7;transition:opacity .2s}
.vbox-close:hover{opacity:1}
.vbox-title{color:#fff;font-family:var(--font-display);font-size:1.15rem;font-weight:700;margin-bottom:10px;padding-right:40px;opacity:.9}
.vbox-frame{position:relative;padding-bottom:56.25%;border-radius:14px;overflow:hidden;background:#000;box-shadow:0 28px 70px rgba(0,0,0,.8)}
.vbox-frame iframe{position:absolute;inset:0;width:100%;height:100%;border:none}
.vbox-links{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}

/* ‚îÄ‚îÄ MOBILE ‚îÄ‚îÄ */
@media(max-width:480px){.site-title{font-size:2rem}.top-nav{gap:2px}.nav-pill{padding:6px 9px;font-size:.76rem}}

/* ‚îÄ‚îÄ STREAK CALENDAR ‚îÄ‚îÄ */
.streak-cal{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin:12px 0}
.streak-day{height:24px;border-radius:5px;background:var(--s3);border:1px solid var(--border);transition:all .2s}
.streak-day.active{background:rgba(129,140,248,.4);border-color:rgba(129,140,248,.5)}
.streak-day.today{box-shadow:0 0 8px rgba(129,140,248,.5)}

/* ‚îÄ‚îÄ ACHIEVEMENTS ‚îÄ‚îÄ */
.ach-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px}
.ach-card{background:var(--s2);border:1px solid var(--border);border-radius:12px;padding:14px;text-align:center;transition:all .2s;position:relative;overflow:hidden}
.ach-card.unlocked{border-color:rgba(251,191,36,.3);background:rgba(251,191,36,.04)}
.ach-card.locked{opacity:.45;filter:grayscale(.7)}
.ach-icon{font-size:2rem;margin-bottom:6px}
.ach-name{font-size:.78rem;font-weight:600;color:var(--text)}
.ach-desc{font-size:.68rem;color:var(--muted);margin-top:3px}
.ach-card.unlocked .ach-name{color:var(--warn)}
</style>
</head>
<body>

<div id="cursor-glow"></div>
<canvas id="bgc"></canvas>
<div class="aurora aurora-1"></div>
<div class="aurora aurora-2"></div>
<div class="aurora aurora-3"></div>

<header class="site-header">
  <div class="header-inner">
    <div class="logo-mark">
      <div class="logo-icon">üéì</div>
      <h1 class="site-title">LearnAI</h1>
    </div>
    <p class="site-tag">Free smart education for Egyptian & Arab youth ‚Äî AI-powered study tools, coding courses & career paths.</p>
    <div class="xp-bar-row">
      <div class="badge badge-xp">‚ö° <span id="xp-display">0</span> XP</div>
      <div class="xp-track"><div class="xp-fill" id="xp-bar" style="width:0%"></div></div>
      <div class="badge badge-level">Lv.<span id="lv-display">1</span></div>
      <div class="badge badge-streak">üî• <span id="streak-display">0</span> day streak</div>
    </div>
  </div>
</header>

<nav class="top-nav" id="top-nav">
  <button class="nav-pill active" data-page="grades"><span class="dot"></span>üìä Grades</button>
  <button class="nav-pill" data-page="summarizer"><span class="dot"></span>üìù Summarize</button>
  <button class="nav-pill" data-page="quiz-ai"><span class="dot"></span>üß† Quiz Me</button>
  <button class="nav-pill" data-page="flashcards"><span class="dot"></span>üÉè Flashcards</button>
  <button class="nav-pill" data-page="notes"><span class="dot"></span>üìì Notes</button>
  <button class="nav-pill" data-page="goals"><span class="dot"></span>üéØ Goals</button>
  <button class="nav-pill" data-page="pomodoro"><span class="dot"></span>‚è± Pomodoro</button>
  <button class="nav-pill" data-page="achievements"><span class="dot"></span>üèÜ Awards</button>
  <div class="nav-sep"></div>
  <button class="nav-pill" data-page="courses"><span class="dot"></span>üìö Courses</button>
  <div class="nav-sep"></div>
  <div id="user-info">
    <span id="user-greet"></span>
    <button class="btn btn-sm btn-danger" id="logout-btn">Logout</button>
  </div>
  <button class="btn btn-sm btn-primary" id="login-btn">Login</button>
  <button class="btn btn-sm" id="reset-data-btn" style="background:rgba(248,113,113,.07);color:var(--danger);border:1px solid rgba(248,113,113,.16);font-size:.76rem;padding:5px 11px">üóë Reset</button>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: GRADES ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-grades" class="page active">
  <div class="inner">
    <div class="hero-grid">
      <div class="hero-stat"><div class="hs-val" id="hs-avg">‚Äî</div><div class="hs-lbl">Overall Average</div></div>
      <div class="hero-stat"><div class="hs-val" id="hs-subs">0</div><div class="hs-lbl">Subjects Tracked</div></div>
      <div class="hero-stat"><div class="hs-val" id="hs-best">‚Äî</div><div class="hs-lbl">Strongest Subject</div></div>
      <div class="hero-stat"><div class="hs-val" id="hs-hrs">0h</div><div class="hs-lbl">Rec. Weekly Hours</div></div>
    </div>

    <!-- Progress rings -->
    <div id="rings-section" style="display:none">
      <div class="card">
        <div class="card-title"><span class="ico">üìà</span> Progress at a Glance</div>
        <div class="ring-wrap" id="rings-wrap"></div>
      </div>
    </div>

    <div class="card">
      <div class="card-title"><span class="ico">üìä</span> Subjects & Grades</div>
      <div id="grades-list"></div>
      <div class="div"></div>
      <div class="add-row">
        <div><label>Subject Name</label><input type="text" id="new-sub" placeholder="e.g. Python Basics"></div>
        <div><label>Grade (%)</label><input type="number" id="new-grade" placeholder="0‚Äì100" min="0" max="100"></div>
        <div><label>Difficulty</label>
          <select id="new-diff"><option value="1">Easy</option><option value="2" selected>Medium</option><option value="3">Hard</option></select>
        </div>
        <button class="btn btn-primary" id="add-sub-btn" style="margin-top:22px">Ôºã Add</button>
      </div>
    </div>

    <div id="stats-sec" style="display:none">
      <div class="stats-bar" id="stats-bar"></div>
      <div class="card">
        <div class="card-title"><span class="ico">üìÖ</span> Smart Study Schedule</div>
        <div id="sched-out"><div class="empty"><div class="e-ico">üìñ</div>Add subjects to generate your schedule</div></div>
        <div class="chart-wrap" id="chart-wrap" style="display:none"><canvas id="gc"></canvas></div>
      </div>
      <div class="card">
        <div class="card-title"><span class="ico">ü§ñ</span> AI Study Insights</div>
        <div id="ai-tips"><div class="empty"><div class="e-ico">üí°</div>Tips appear after adding subjects</div></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: SUMMARIZER ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-summarizer" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üìù</span> Lesson Summarizer</div>
      <label>Paste your lesson, article or notes ‚Äî Arabic & English supported üåê</label>
      <textarea id="sum-in" rows="10" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ŸáŸÜÿß ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ÿ£Ÿà ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ© ‚Äî ÿ≥Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ÿßŸÑŸÑÿ∫ÿ© ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã&#10;&#10;Or paste English content here ‚Äî language is auto-detected."></textarea>
      <div style="display:flex;gap:10px;margin-top:14px;flex-wrap:wrap;align-items:center">
        <button class="btn btn-primary" id="sum-btn">‚ú® Summarize</button>
        <button class="btn btn-secondary" id="sum-clear">Clear</button>
        <div style="margin-left:auto">
          <label style="display:inline-flex;align-items:center;gap:8px;margin:0;cursor:pointer;font-size:.8rem;color:var(--muted);text-transform:none;letter-spacing:0">
            <input type="checkbox" id="sum-save-note" style="width:auto;accent-color:var(--accent)"> Save as Note
          </label>
        </div>
      </div>
    </div>
    <div class="card" id="sum-card" style="display:none">
      <div class="card-title"><span class="ico">üí°</span> Summary</div>
      <div id="sum-lang-badge"></div>
      <div id="sum-out"></div>
      <div class="div"></div>
      <div class="ai-lbl" style="margin-bottom:8px">Key Terms</div>
      <div class="terms" id="sum-terms"></div>
      <div class="div"></div>
      <div class="ai-lbl" style="margin-bottom:5px">Reading Stats</div>
      <div id="sum-stats" style="color:var(--muted);font-size:.83rem;"></div>
      <div class="div"></div>
      <button class="btn btn-secondary btn-sm" id="sum-copy-btn">üìã Copy Summary</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: QUIZ ME ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-quiz-ai" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üß†</span> Quiz Generator</div>
      <label>Paste text to quiz yourself on ‚Äî Arabic & English supported üåê</label>
      <textarea id="qx-in" rows="5" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÜÿµ ŸáŸÜÿß&#10;&#10;e.g. Photosynthesis is the process by which plants use sunlight, water and CO‚ÇÇ..."></textarea>
      <div style="display:flex;gap:10px;margin-top:14px;flex-wrap:wrap;align-items:center">
        <button class="btn btn-primary" id="quiz-gen-btn">‚ö° Generate Quiz</button>
        <div style="display:flex;align-items:center;gap:8px;margin-left:auto">
          <label style="margin:0;font-size:.8rem;color:var(--muted);text-transform:none;letter-spacing:0">Questions:</label>
          <select id="qx-count" style="width:80px;padding:7px 10px;font-size:.85rem"><option>5</option><option selected>10</option><option>15</option></select>
        </div>
      </div>
    </div>
    <div id="qx-area" class="card" style="display:none">
      <div class="card-title"><span class="ico">‚ùì</span> Quiz</div>
      <div class="qx-score" id="qx-score"></div>
      <div id="qx-q-wrap"></div>
      <button id="qx-next" class="btn btn-secondary" style="display:none">Next ‚Üí</button>
      <div id="qx-result" style="display:none;color:var(--muted);margin-top:14px;font-size:.9rem;"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: FLASHCARDS ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-flashcards" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üÉè</span> Flashcard Generator</div>
      <label>Paste text ‚Äî Arabic & English supported üåê</label>
      <textarea id="fc-in" rows="5" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸä ŸáŸÜÿß&#10;&#10;Paste educational content and we'll extract key concept ‚Üí definition pairs..."></textarea>
      <button class="btn btn-primary" id="fc-gen-btn" style="margin-top:14px">üÉè Create Flashcards</button>
    </div>
    <div id="fc-area" class="card" style="display:none">
      <div class="card-title"><span class="ico">üîÑ</span> Study Mode <span style="font-size:.72rem;color:var(--muted);font-family:var(--font-mono);margin-left:8px">‚Üê ‚Üí Space</span></div>
      <!-- Confidence rating row -->
      <div id="fc-confidence" style="display:none;gap:8px;justify-content:center;margin-bottom:12px;flex-wrap:wrap">
        <span style="font-size:.8rem;color:var(--muted);align-self:center">Rate this card:</span>
        <button class="btn btn-sm" data-conf="easy" style="background:rgba(52,211,153,.12);color:var(--success);border:1px solid rgba(52,211,153,.22)">‚úì Got it</button>
        <button class="btn btn-sm" data-conf="medium" style="background:rgba(251,191,36,.1);color:var(--warn);border:1px solid rgba(251,191,36,.2)">‚âà Unsure</button>
        <button class="btn btn-sm" data-conf="hard" style="background:rgba(248,113,113,.1);color:var(--danger);border:1px solid rgba(248,113,113,.2)">‚úï Need review</button>
      </div>
      <div class="fc-scene" id="fc-scene">
        <div class="fc-card" id="fc-card">
          <div class="fc-face fc-front">
            <div class="fc-lbl">Term / ÿßŸÑŸÖÿµÿ∑ŸÑÿ≠</div>
            <div class="fc-txt" id="fc-front-txt"></div>
            <div class="fc-hint">Click or press Space to reveal</div>
          </div>
          <div class="fc-face fc-back">
            <div class="fc-lbl">Definition / ÿßŸÑÿ™ÿπÿ±ŸäŸÅ</div>
            <div class="fc-txt" id="fc-back-txt"></div>
          </div>
        </div>
      </div>
      <div class="fc-nav">
        <button class="btn btn-secondary btn-sm" id="fc-prev">‚Üê Prev</button>
        <span class="fc-ctr" id="fc-ctr">1 / 1</span>
        <button class="btn btn-secondary btn-sm" id="fc-next">Next ‚Üí</button>
        <button class="btn btn-sm" id="fc-shuffle" style="margin-left:8px;background:rgba(129,140,248,.1);color:var(--accent);border:1px solid rgba(129,140,248,.2)">üîÄ Shuffle</button>
      </div>
      <div class="prog-bar" style="max-width:320px;margin:12px auto 0"><div class="prog-fill" id="fc-prog" style="width:0%"></div></div>
      <div id="fc-stats" style="margin-top:14px;display:none">
        <div class="div"></div>
        <div class="ai-lbl" style="margin-bottom:8px">Session Stats</div>
        <div id="fc-stats-inner" style="font-size:.85rem;color:var(--muted)"></div>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: NOTES ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-notes" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üìì</span> My Notes</div>
      <div style="display:flex;gap:10px;margin-bottom:14px">
        <input type="text" id="note-title-in" placeholder="Note title‚Ä¶" style="max-width:260px">
        <button class="btn btn-primary" id="note-new-btn">Ôºã New Note</button>
      </div>
      <div id="notes-list"><div class="empty"><div class="e-ico">üìì</div>No notes yet ‚Äî create one or save a summary!</div></div>
    </div>
    <div id="note-editor" class="card" style="display:none">
      <div class="card-title" style="justify-content:space-between">
        <span><span class="ico">‚úèÔ∏è</span> <span id="note-editor-title">Editing Note</span></span>
        <div style="display:flex;gap:8px">
          <button class="btn btn-primary btn-sm" id="note-save-btn">üíæ Save</button>
          <button class="btn btn-secondary btn-sm" id="note-close-btn">‚úï Close</button>
        </div>
      </div>
      <textarea id="note-content" rows="12" placeholder="Write your note here ‚Äî supports Arabic & English‚Ä¶" style="font-size:.9rem;line-height:1.7;resize:vertical"></textarea>
      <div style="display:flex;gap:10px;margin-top:10px;flex-wrap:wrap">
        <button class="btn btn-secondary btn-sm" id="note-delete-btn" style="color:var(--danger);border-color:rgba(248,113,113,.2)">üóë Delete</button>
        <span id="note-saved-msg" style="font-size:.78rem;color:var(--muted);align-self:center;display:none">‚úì Saved</span>
      </div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: GOALS ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-goals" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üéØ</span> Study Goals</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <input type="text" id="new-goal" placeholder="Add a study goal‚Ä¶" style="flex:1;min-width:180px">
        <select id="goal-priority" style="width:110px;padding:10px"><option value="high">üî¥ High</option><option value="medium" selected>üü° Medium</option><option value="low">üü¢ Low</option></select>
        <button class="btn btn-primary" id="add-goal-btn">Ôºã Add</button>
      </div>
      <div class="div"></div>
      <div id="goals-list"><div class="empty"><div class="e-ico">üéØ</div>No goals yet ‚Äî add one above!</div></div>
      <div id="goals-div" style="display:none"></div>
      <div id="goals-sum" style="display:none;color:var(--muted);font-size:.84rem;margin-top:12px"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: POMODORO ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-pomodoro" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">‚è±</span> Pomodoro Timer</div>
      <div class="mode-pills" id="pom-modes">
        <button class="mode-pill active" data-w="25" data-b="5">üçÖ Classic (25/5)</button>
        <button class="mode-pill" data-w="50" data-b="10">üí™ Deep Work (50/10)</button>
        <button class="mode-pill" data-w="15" data-b="3">‚ö° Sprint (15/3)</button>
        <button class="mode-pill" data-w="0" data-b="0">‚öôÔ∏è Custom</button>
      </div>
      <div class="pom-wrap">
        <div class="pom-ring-el">
          <svg viewBox="0 0 190 190" width="190" height="190">
            <defs><linearGradient id="pomG" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#818cf8"/><stop offset="100%" stop-color="#34d399"/>
            </linearGradient></defs>
            <circle class="pom-track" cx="95" cy="95" r="82"/>
            <circle class="pom-prog" id="pom-ring" cx="95" cy="95" r="82" stroke-dasharray="515.22" stroke-dashoffset="0"/>
          </svg>
          <div class="pom-center">
            <div class="pom-time" id="pom-disp">25:00</div>
            <div class="pom-lbl" id="pom-mode">Focus</div>
          </div>
        </div>
        <div class="pom-ctrls">
          <button class="btn btn-primary" id="pom-start">‚ñ∂ Start</button>
          <button class="btn btn-secondary" id="pom-reset">‚Ü∫ Reset</button>
        </div>
        <div id="pom-custom-row" class="grid-2" style="max-width:300px;margin:0 auto;display:none">
          <div><label>Focus (min)</label><input type="number" id="pom-w" value="25" min="1" max="90" style="text-align:center"></div>
          <div><label>Break (min)</label><input type="number" id="pom-b" value="5" min="1" max="30" style="text-align:center"></div>
        </div>
        <div class="pom-dots" id="pom-dots">
          <div class="pom-dot"></div><div class="pom-dot"></div><div class="pom-dot"></div><div class="pom-dot"></div>
        </div>
        <div style="margin-top:7px;font-size:.76rem;color:var(--muted)">Session <span id="pom-sess">0</span> / 4</div>
      </div>
      <div class="div"></div>
      <div class="ai-lbl" style="margin-bottom:12px">Today's Stats</div>
      <div class="stats-bar" style="grid-template-columns:repeat(3,1fr)">
        <div class="stat-box"><div class="stat-val" id="pom-tot-s">0</div><div class="stat-lbl">Sessions</div></div>
        <div class="stat-box"><div class="stat-val" id="pom-tot-m">0</div><div class="stat-lbl">Focus Min</div></div>
        <div class="stat-box"><div class="stat-val" id="pom-streak-s">0</div><div class="stat-lbl">Best Streak</div></div>
      </div>
      <!-- Streak calendar -->
      <div class="div"></div>
      <div class="ai-lbl" style="margin-bottom:8px">Last 21 Days</div>
      <div class="streak-cal" id="streak-cal"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: ACHIEVEMENTS ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-achievements" class="page">
  <div class="inner">
    <div class="card">
      <div class="card-title"><span class="ico">üèÜ</span> Achievements & Badges</div>
      <div style="margin-bottom:16px;color:var(--muted);font-size:.88rem">Unlock badges by completing tasks. Locked badges are grayed out.</div>
      <div class="ach-grid" id="ach-grid"></div>
    </div>
    <div class="card">
      <div class="card-title"><span class="ico">üåç</span> Leaderboard</div>
      <div style="font-size:.8rem;color:var(--muted);margin-bottom:14px">Top learners on this device (session history). Compete with yourself!</div>
      <div id="leaderboard-list"></div>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê PAGE: COURSES ‚ïê‚ïê‚ïê‚ïê -->
<div id="page-courses" class="page">
  <div class="inner">
    <div class="search-bar">
      <span class="search-icon">üîç</span>
      <input type="text" id="course-search" placeholder="Search courses ‚Äî Python, React, SQL, Go‚Ä¶">
      <button class="search-clear" id="search-clear-btn">‚úï</button>
    </div>
    <div class="filter-pills" id="filter-pills">
      <button class="fpill on" data-filter="all">All Courses</button>
      <button class="fpill" data-filter="beginner">Beginner</button>
      <button class="fpill" data-filter="intermediate">Intermediate</button>
      <button class="fpill" data-filter="advanced">Advanced</button>
      <button class="fpill" data-filter="web">Web Dev</button>
      <button class="fpill" data-filter="backend">Backend</button>
      <button class="fpill" data-filter="career">Career</button>
    </div>

    <div class="sec-head"><h2>Programming Fundamentals</h2><div class="sec-rule"></div></div>
    <div class="course-grid" id="grid-fundamentals">
      <div class="course-card" data-tags="beginner web fundamentals" data-vid="mU6anWqZJcc" data-title="HTML &amp; CSS Full Course ‚Äì freeCodeCamp">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="mU6anWqZJcc" data-title="HTML &amp; CSS Full Course ‚Äì freeCodeCamp">
          <img src="https://i.ytimg.com/vi/mU6anWqZJcc/hqdefault.jpg" alt="HTML CSS" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~4h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Beginner</span>
          <h3>HTML &amp; CSS</h3>
          <p>Structure &amp; styling ‚Äî build responsive websites from scratch.</p>
          <div class="course-meta"><span>üéì Traversy Media</span><span>‚≠ê 4.9</span><span>üë• 2.1M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="html">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="beginner web fundamentals" data-vid="W6NZfCO5SIk" data-title="JavaScript Full Course for Beginners">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="W6NZfCO5SIk" data-title="JavaScript Full Course">
          <img src="https://i.ytimg.com/vi/W6NZfCO5SIk/hqdefault.jpg" alt="JavaScript" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~8h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Beginner</span>
          <h3>JavaScript ‚Äì Basics</h3>
          <p>Variables, functions, DOM &amp; events ‚Äî the language of the web.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span><span>üë• 5.8M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="javascript-basics">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="beginner fundamentals" data-vid="RGOj5yH7evk" data-title="Git &amp; GitHub Crash Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="RGOj5yH7evk" data-title="Git and GitHub Crash Course">
          <img src="https://i.ytimg.com/vi/RGOj5yH7evk/hqdefault.jpg" alt="Git" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~1h</span>
        </div>
        <div class="course-body">
          <span class="level-chip" style="background:rgba(56,189,248,.12);color:var(--a5);border-color:rgba(56,189,248,.22)">Beginner ‚Üí Intermediate</span>
          <h3>Git &amp; GitHub</h3>
          <p>Version control ‚Äî essential for every professional developer.</p>
          <div class="course-meta"><span>üéì Traversy Media</span><span>‚≠ê 4.8</span><span>üë• 3.2M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="git">I've Finished This ‚úÖ</button>
        </div>
      </div>
    </div>

    <div class="sec-head"><h2>Core Programming Languages</h2><div class="sec-rule"></div></div>
    <div class="course-grid" id="grid-languages">
      <div class="course-card" id="card-python" data-tags="beginner intermediate backend" data-vid="rfscVS0vtbw" data-title="Python for Beginners ‚Äì Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="rfscVS0vtbw" data-title="Python for Beginners ‚Äì Full Course">
          <img src="https://i.ytimg.com/vi/rfscVS0vtbw/hqdefault.jpg" alt="Python" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~4.5h</span>
        </div>
        <div class="course-body">
          <span class="level-chip level-hot">üî• Most Popular 2026</span>
          <h3>Python</h3>
          <p>AI, data, automation &amp; web backends ‚Äî the most in-demand language.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span><span>üë• 42M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="python">I've Finished This ‚úÖ</button>
          <button class="btn btn-cyan quiz-btn" data-lang="python" style="display:none">üèÜ Take 30-Question Professional Quiz</button>
        </div>
      </div>
      <div class="course-card" data-tags="intermediate advanced web" data-vid="30LWjhZzg50" data-title="TypeScript Full Course for Beginners">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="30LWjhZzg50" data-title="TypeScript Full Course">
          <img src="https://i.ytimg.com/vi/30LWjhZzg50/hqdefault.jpg" alt="TypeScript" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~3h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">High Demand</span>
          <h3>TypeScript</h3>
          <p>Type-safe JavaScript ‚Äî standard in serious frontend &amp; full-stack projects.</p>
          <div class="course-meta"><span>üéì Jack Herrington</span><span>‚≠ê 4.8</span><span>üë• 1.4M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="typescript">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="intermediate advanced backend" data-vid="eIrMbAQSU34" data-title="Java Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="eIrMbAQSU34" data-title="Java Full Course">
          <img src="https://i.ytimg.com/vi/eIrMbAQSU34/hqdefault.jpg" alt="Java" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~9h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Enterprise / Android</span>
          <h3>Java</h3>
          <p>Backend systems, Android apps, big-company interviews ‚Äî timeless &amp; stable.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.7</span><span>üë• 12M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="java">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="advanced backend" data-vid="8jLOx1hD3_o" data-title="C++ Tutorial for Beginners ‚Äì Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="8jLOx1hD3_o" data-title="C++ Tutorial ‚Äì Full Course">
          <img src="https://i.ytimg.com/vi/8jLOx1hD3_o/hqdefault.jpg" alt="C++" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~4h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Systems / Games</span>
          <h3>C++</h3>
          <p>Performance-critical software, game engines &amp; embedded systems.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.8</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="cpp">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="intermediate advanced backend" data-vid="un6ZyFkqFKo" data-title="Go Programming ‚Äì Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="un6ZyFkqFKo" data-title="Go Programming ‚Äì Full Course">
          <img src="https://i.ytimg.com/vi/un6ZyFkqFKo/hqdefault.jpg" alt="Go" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~3h</span>
        </div>
        <div class="course-body">
          <span class="level-chip level-new">New &amp; Growing</span>
          <h3>Go (Golang)</h3>
          <p>Fast, concurrent cloud-native backends ‚Äî rising fast in the industry.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span><span>üë• 3.1M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="go">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="advanced backend" data-vid="BpPEoZW5IiY" data-title="Rust Programming Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="BpPEoZW5IiY" data-title="Rust Programming Full Course">
          <img src="https://i.ytimg.com/vi/BpPEoZW5IiY/hqdefault.jpg" alt="Rust" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~3.5h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Future-Proof</span>
          <h3>Rust</h3>
          <p>Memory-safe systems programming ‚Äî replacing C++ in critical areas.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="rust">I've Finished This ‚úÖ</button>
        </div>
      </div>
    </div>

    <div class="sec-head"><h2>Modern Frameworks &amp; Full-Stack</h2><div class="sec-rule"></div></div>
    <div class="course-grid" id="grid-frameworks">
      <div class="course-card" data-tags="intermediate web frontend" data-vid="SqcY0GlETPk" data-title="React JS Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="SqcY0GlETPk" data-title="React JS Full Course">
          <img src="https://i.ytimg.com/vi/SqcY0GlETPk/hqdefault.jpg" alt="React" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~11h</span>
        </div>
        <div class="course-body">
          <span class="level-chip level-hot">üî• Frontend Standard</span>
          <h3>React</h3>
          <p>Component-based UIs ‚Äî used by Meta, Netflix, Airbnb &amp; thousands of startups.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span><span>üë• 7.5M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="react">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="intermediate backend web" data-vid="Oe421EPjeBE" data-title="Node.js and Express ‚Äì Full Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="Oe421EPjeBE" data-title="Node.js and Express ‚Äì Full Course">
          <img src="https://i.ytimg.com/vi/Oe421EPjeBE/hqdefault.jpg" alt="Node.js" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~8h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Backend JS</span>
          <h3>Node.js + Express</h3>
          <p>JavaScript on the server ‚Äî full-stack with one language.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.8</span><span>üë• 5.2M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="nodejs">I've Finished This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="intermediate backend" data-vid="7S_tz1z_5bA" data-title="SQL Tutorial ‚Äì Full Database Course">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="7S_tz1z_5bA" data-title="SQL Tutorial ‚Äì Full Database Course">
          <img src="https://i.ytimg.com/vi/7S_tz1z_5bA/hqdefault.jpg" alt="SQL" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~4h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">Databases</span>
          <h3>SQL &amp; Databases</h3>
          <p>Store &amp; query data ‚Äî PostgreSQL, MySQL basics every developer needs.</p>
          <div class="course-meta"><span>üéì freeCodeCamp</span><span>‚≠ê 4.9</span><span>üë• 9.8M views</span></div>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="sql">I've Finished This ‚úÖ</button>
        </div>
      </div>
    </div>

    <div class="pathway-banner">
      <h3>‚ú® Suggested Learning Pathway 2026</h3>
      <p>
        <span class="pa">HTML/CSS + JS</span><span class="pa-arrow">‚Üí</span>
        <span class="pa">Python or TypeScript</span><span class="pa-arrow">‚Üí</span>
        <span class="pa">React + Node.js</span><span class="pa-arrow">‚Üí</span>
        <span class="pa">Portfolio Projects</span><span class="pa-arrow">‚Üí</span>
        <span class="pa">Freelance / Remote Jobs</span>
      </p>
    </div>

    <div class="sec-head"><h2>Earn from Code &amp; Find Jobs</h2><div class="sec-rule"></div></div>
    <div class="course-grid" id="grid-career">
      <div class="course-card" data-tags="career">
        <div class="done-badge">‚úì Completed</div>
        <div style="position:relative;width:100%;padding-bottom:56.25%;background:linear-gradient(135deg,rgba(129,140,248,.12),rgba(251,191,36,.08));flex-shrink:0">
          <div style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:20px">
            <div style="font-size:2.6rem">üí∞</div>
            <div style="font-family:var(--font-display);font-size:1.05rem;text-align:center;color:var(--text)">Freelancing 101</div>
            <a href="https://www.youtube.com/results?search_query=freelancing+for+developers+full+guide+freeCodeCamp" target="_blank" rel="noopener" class="btn btn-primary btn-sm" style="text-decoration:none">‚ñ∂ Search on YouTube</a>
          </div>
        </div>
        <div class="course-body">
          <span class="level-chip level-hot">üí∞ Earn Online</span>
          <h3>Freelancing 101</h3>
          <p>Upwork, Fiverr, proposals &amp; first clients as a developer.</p>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="freelancing">I've Watched This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="career">
        <div class="done-badge">‚úì Completed</div>
        <div style="position:relative;width:100%;padding-bottom:56.25%;background:linear-gradient(135deg,rgba(56,189,248,.08),rgba(129,140,248,.1));flex-shrink:0">
          <div style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:20px">
            <div style="font-size:2.6rem">üåç</div>
            <div style="font-family:var(--font-display);font-size:1.05rem;text-align:center;color:var(--text)">Remote Jobs Guide</div>
            <a href="https://www.youtube.com/results?search_query=how+to+get+remote+job+developer+2024" target="_blank" rel="noopener" class="btn btn-primary btn-sm" style="text-decoration:none">‚ñ∂ Search on YouTube</a>
          </div>
        </div>
        <div class="course-body">
          <span class="level-chip">üåç Remote Career</span>
          <h3>Remote Jobs Guide</h3>
          <p>LinkedIn, remote.co, international applications &amp; ATS-beating resumes.</p>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="remote-jobs">I've Watched This ‚úÖ</button>
        </div>
      </div>
      <div class="course-card" data-tags="career web" data-vid="_xkSvufmjEs" data-title="How to Build a Developer Portfolio">
        <div class="done-badge">‚úì Completed</div>
        <div class="vid-thumb" data-vid="_xkSvufmjEs" data-title="Developer Portfolio Guide">
          <img src="https://i.ytimg.com/vi/_xkSvufmjEs/hqdefault.jpg" alt="Portfolio" loading="lazy">
          <div class="play-btn"><div class="play-circle">‚ñ∂</div></div>
          <span class="vid-dur">~1h</span>
        </div>
        <div class="course-body">
          <span class="level-chip">üóÇ Portfolio</span>
          <h3>Build a Dev Portfolio</h3>
          <p>Projects that impress recruiters ‚Äî GitHub + live demos that get callbacks.</p>
        </div>
        <div class="course-actions">
          <button class="btn btn-success mark-done-btn" data-lang="portfolio">I've Watched This ‚úÖ</button>
        </div>
      </div>
    </div>
  </div>
</div>

<footer class="site-footer">
  ¬© <span id="yr"></span> <strong>LearnAI</strong> &nbsp;¬∑&nbsp; Built with passion for Arab & African youth developers &nbsp;¬∑&nbsp; <strong style="color:var(--a2)">Ÿäÿßÿ≥ŸäŸÜ ŸÖÿ≠ŸÖÿØ</strong>
</footer>

<!-- VIDEO LIGHTBOX -->
<div id="vbox">
  <div class="vbox-inner">
    <button class="vbox-close" id="vbox-close">‚úï</button>
    <div class="vbox-title" id="vbox-title"></div>
    <div class="vbox-frame"><iframe id="vbox-iframe" src="" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
    <div class="vbox-links">
      <a id="vbox-yt-link" href="#" target="_blank" rel="noopener" class="btn btn-secondary btn-sm">üîó Open on YouTube</a>
      <span style="font-size:.78rem;color:var(--muted);align-self:center">‚Üë Full screen for best experience</span>
    </div>
  </div>
</div>

<!-- LOGIN MODAL -->
<div id="m-login" class="modal">
  <div class="modal-box">
    <div class="modal-hd"><h2>Welcome Back üëã</h2><button class="modal-close" id="login-close">‚úï</button></div>
    <div class="modal-body">
      <div style="text-align:center;margin-bottom:22px">
        <div class="logo-icon" style="width:44px;height:44px;border-radius:12px;font-size:20px;display:inline-flex;align-items:center;justify-content:center;margin-bottom:10px">üéì</div>
        <p style="color:var(--muted);font-size:.86rem">No real account needed ‚Äî progress is saved in your browser.</p>
      </div>
      <div style="margin-bottom:10px"><label>Your Name or Email</label><input class="modal-input" type="text" id="m-name" placeholder="e.g. Yassin or yassin@email.com"></div>
      <div style="margin-bottom:16px"><label>Password (optional, demo mode)</label><input class="modal-input" type="password" id="m-pass" placeholder="Any password works"></div>
      <button class="btn btn-primary" id="do-login-btn" style="width:100%;justify-content:center;padding:12px">üöÄ Login &amp; Start Learning</button>
      <div class="login-sep"><span>or continue as guest</span></div>
      <button class="btn btn-secondary" id="guest-btn" style="width:100%;justify-content:center">üë§ Continue as Guest</button>
    </div>
  </div>
</div>

<!-- QUIZ MODAL -->
<div id="m-quiz" class="modal">
  <div class="modal-box">
    <div class="modal-hd"><h2 id="m-quiz-title">Python Mastery Quiz</h2><button class="modal-close" id="quiz-close">‚úï</button></div>
    <div class="modal-body">
      <div id="m-prog">Question <span id="m-qn">1</span> / 30</div>
      <div id="m-qtext"></div>
      <div id="m-opts"></div>
      <button id="m-next" class="btn btn-primary" style="width:100%;justify-content:center;opacity:.4;pointer-events:none">Next Question ‚Üí</button>
      <div id="m-result" style="display:none;text-align:center;padding:1.4rem 0">
        <div style="font-family:var(--font-display);font-size:3.2rem;font-weight:800" id="m-score" class="stat-val"></div>
        <p id="m-msg" style="color:var(--muted);margin:10px 0 22px;font-size:.95rem"></p>
        <button class="btn btn-primary" id="quiz-restart-btn">Restart Quiz</button>
        <button class="btn btn-secondary" id="quiz-done-btn" style="margin-left:8px">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- RESET MODAL -->
<div id="m-reset" class="modal">
  <div class="modal-box" style="max-width:420px">
    <div class="modal-hd"><h2 style="color:var(--danger)">‚ö†Ô∏è Reset All Data</h2><button class="modal-close" id="reset-close">‚úï</button></div>
    <div class="modal-body">
      <div style="text-align:center;margin-bottom:20px">
        <div style="font-size:2.8rem;margin-bottom:10px">üóëÔ∏è</div>
        <p style="color:var(--muted);font-size:.88rem;line-height:1.7">This will permanently erase <strong style="color:var(--text)">all saved data</strong> including grades, XP, goals, notes, and courses.</p>
        <p style="color:var(--danger);font-size:.8rem;font-weight:600;margin-top:10px">This action cannot be undone.</p>
      </div>
      <div style="display:flex;gap:10px">
        <button class="btn btn-secondary" id="reset-cancel-btn" style="flex:1;justify-content:center">Cancel</button>
        <button class="btn" id="reset-confirm-btn" style="flex:1;justify-content:center;background:rgba(248,113,113,.15);color:var(--danger);border:1px solid rgba(248,113,113,.28)">üóë Delete Everything</button>
      </div>
    </div>
  </div>
</div>

<!-- NOTE VIEW MODAL -->
<div id="m-note-view" class="modal">
  <div class="modal-box">
    <div class="modal-hd"><h2 id="m-note-view-title">Note</h2><button class="modal-close" id="note-view-close">‚úï</button></div>
    <div class="modal-body">
      <div id="m-note-view-body" style="white-space:pre-wrap;font-size:.9rem;line-height:1.75;color:var(--text)"></div>
      <div class="div"></div>
      <button class="btn btn-secondary btn-sm" id="note-view-copy">üìã Copy</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PARTICLES BACKGROUND
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
(function(){
  const c=document.getElementById('bgc'),ctx=c.getContext('2d');
  let W,H,pts=[];
  function resize(){W=c.width=window.innerWidth;H=c.height=window.innerHeight;}
  window.addEventListener('resize',resize);resize();
  for(let i=0;i<55;i++)pts.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.28,vy:(Math.random()-.5)*.28,r:Math.random()*1.4+.4});
  function draw(){
    ctx.clearRect(0,0,W,H);
    pts.forEach(p=>{
      p.x+=p.vx;p.y+=p.vy;
      if(p.x<0||p.x>W)p.vx*=-1;
      if(p.y<0||p.y>H)p.vy*=-1;
      ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
      ctx.fillStyle='rgba(129,140,248,.45)';ctx.fill();
    });
    pts.forEach((a,i)=>pts.slice(i+1).forEach(b=>{
      const d=Math.hypot(a.x-b.x,a.y-b.y);
      if(d<110){ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);
        ctx.strokeStyle=`rgba(129,140,248,${.12*(1-d/110)})`;ctx.lineWidth=.5;ctx.stroke();}
    }));
    requestAnimationFrame(draw);
  }
  draw();
})();

/* ‚îÄ‚îÄ CURSOR GLOW ‚îÄ‚îÄ */
document.addEventListener('mousemove',e=>{
  const g=document.getElementById('cursor-glow');
  g.style.left=e.clientX+'px';g.style.top=e.clientY+'px';
});

document.getElementById('yr').textContent=new Date().getFullYear();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PAGE SWITCHER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function gotoPage(name){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-pill').forEach(b=>b.classList.remove('active'));
  const pg=document.getElementById('page-'+name);
  const pill=document.getElementById('nav-'+name)||document.querySelector(`[data-page="${name}"]`);
  if(pg)pg.classList.add('active');
  if(pill)pill.classList.add('active');
  window.scrollTo({top:0,behavior:'smooth'});
  if(name==='achievements')renderAchievements();
}
document.querySelectorAll('.nav-pill[data-page]').forEach(btn=>{
  btn.addEventListener('click',()=>gotoPage(btn.dataset.page));
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TOAST
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let toastTimer;
function showToast(msg,type='info'){
  const el=document.getElementById('toast');
  const ic={info:'üí°',success:'‚úÖ',warn:'‚ö†Ô∏è',error:'‚ùå'}[type]||'üí°';
  el.innerHTML=`${ic} ${msg}`;
  el.style.borderColor={info:'var(--border2)',success:'rgba(52,211,153,.28)',warn:'rgba(251,191,36,.28)',error:'rgba(248,113,113,.28)'}[type];
  el.classList.add('show');clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>el.classList.remove('show'),3200);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   XP / LEVEL / STREAK
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let xpData=JSON.parse(localStorage.getItem('learnai-xp')||'{"xp":0,"streak":0,"lastDate":"","completedCourses":[],"bestPomStreak":0}');
function getLevel(xp){return Math.floor(xp/500)+1;}
function getLevelXP(xp){return xp%500;}
function updateXPUI(){
  document.getElementById('xp-display').textContent=xpData.xp;
  document.getElementById('streak-display').textContent=xpData.streak;
  const lv=getLevel(xpData.xp);
  document.getElementById('lv-display').textContent=lv;
  document.getElementById('xp-bar').style.width=(getLevelXP(xpData.xp)/500*100)+'%';
}
function addXP(amount,reason){
  const prev=getLevel(xpData.xp);
  xpData.xp+=amount;
  const today=new Date().toDateString();
  if(xpData.lastDate!==today){
    const yest=new Date(Date.now()-86400000).toDateString();
    xpData.streak=(xpData.lastDate===yest)?xpData.streak+1:1;
    xpData.lastDate=today;
  }
  localStorage.setItem('learnai-xp',JSON.stringify(xpData));
  updateXPUI();
  if(reason)showToast(`+${amount} XP ‚Äî ${reason}`,'success');
  const nxt=getLevel(xpData.xp);
  if(nxt>prev)showToast(`üéâ Level Up! You reached Level ${nxt}!`,'success');
  checkAchievements();
}
updateXPUI();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ACHIEVEMENTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const ACHIEVEMENTS=[
  {id:'first_login',icon:'üëã',name:'First Step',desc:'Log in for the first time',xpReq:0,custom:'first_login'},
  {id:'xp100',icon:'‚ö°',name:'XP Spark',desc:'Earn 100 XP',xpReq:100},
  {id:'xp500',icon:'üåü',name:'Rising Star',desc:'Earn 500 XP',xpReq:500},
  {id:'xp1000',icon:'üíé',name:'Diamond Mind',desc:'Earn 1000 XP',xpReq:1000},
  {id:'xp2500',icon:'üèÜ',name:'Champion',desc:'Earn 2500 XP',xpReq:2500},
  {id:'level5',icon:'üöÄ',name:'Level 5',desc:'Reach Level 5',custom:'level5'},
  {id:'course1',icon:'üìö',name:'First Course',desc:'Complete 1 course',custom:'course1'},
  {id:'course5',icon:'üéì',name:'Dedicated',desc:'Complete 5 courses',custom:'course5'},
  {id:'summary',icon:'üìù',name:'Summarizer',desc:'Create your first summary',custom:'summary'},
  {id:'quiz_pass',icon:'üß†',name:'Quiz Champ',desc:'Pass a quiz with 80%+',custom:'quiz_pass'},
  {id:'flashcard',icon:'üÉè',name:'Card Shark',desc:'Create flashcards',custom:'flashcard'},
  {id:'goal',icon:'üéØ',name:'Goal Setter',desc:'Complete a study goal',custom:'goal'},
  {id:'pom3',icon:'üçÖ',name:'Focused',desc:'Complete 3 Pomodoro sessions',custom:'pom3'},
  {id:'streak7',icon:'üî•',name:'On Fire',desc:'7-day study streak',custom:'streak7'},
  {id:'note',icon:'üìì',name:'Note Taker',desc:'Save your first note',custom:'note'},
  {id:'grades5',icon:'üìä',name:'Analyst',desc:'Track 5 subjects',custom:'grades5'},
];

let unlockedAch=JSON.parse(localStorage.getItem('learnai-ach')||'[]');
function unlockAch(id){
  if(unlockedAch.includes(id))return false;
  unlockedAch.push(id);
  localStorage.setItem('learnai-ach',JSON.stringify(unlockedAch));
  const ach=ACHIEVEMENTS.find(a=>a.id===id);
  if(ach)showToast(`üèÖ Achievement Unlocked: ${ach.name}!`,'success');
  return true;
}
function checkAchievements(){
  const xp=xpData.xp,courses=xpData.completedCourses||[];
  if(xp>=100)unlockAch('xp100');
  if(xp>=500)unlockAch('xp500');
  if(xp>=1000)unlockAch('xp1000');
  if(xp>=2500)unlockAch('xp2500');
  if(getLevel(xp)>=5)unlockAch('level5');
  if(courses.length>=1)unlockAch('course1');
  if(courses.length>=5)unlockAch('course5');
  if(xpData.streak>=7)unlockAch('streak7');
  const pomData=JSON.parse(localStorage.getItem('learnai-pom')||'{}');
  if((pomData.s||0)>=3)unlockAch('pom3');
}
function renderAchievements(){
  checkAchievements();
  const grid=document.getElementById('ach-grid');
  grid.innerHTML=ACHIEVEMENTS.map(a=>{
    const locked=!unlockedAch.includes(a.id);
    return `<div class="ach-card ${locked?'locked':'unlocked'}">
      <div class="ach-icon">${a.icon}</div>
      <div class="ach-name">${a.name}</div>
      <div class="ach-desc">${a.desc}</div>
      ${!locked?'<div style="font-size:.68rem;color:var(--warn);margin-top:4px;font-weight:600">‚úì Unlocked</div>':''}
    </div>`;
  }).join('');
  // Leaderboard (self-competition over sessions)
  const lbData=JSON.parse(localStorage.getItem('learnai-lb')||'[]');
  if(!lbData.find(e=>e.xp===xpData.xp&&e.name===(currentUser?.name||'Guest'))){
    lbData.push({name:currentUser?.name||'You',xp:xpData.xp,date:new Date().toLocaleDateString(),courses:(xpData.completedCourses||[]).length});
    lbData.sort((a,b)=>b.xp-a.xp);
    lbData.splice(10,100);
    localStorage.setItem('learnai-lb',JSON.stringify(lbData));
  }
  const medals=['ü•á','ü•à','ü•â'];
  document.getElementById('leaderboard-list').innerHTML=lbData.length?lbData.map((e,i)=>`
    <div class="lb-row">
      <div class="lb-rank">${medals[i]||'#'+(i+1)}</div>
      <div>
        <div class="lb-name">${e.name}</div>
        <div style="font-size:.72rem;color:var(--muted)">${e.date} ¬∑ ${e.courses} courses</div>
      </div>
      <div class="lb-xp">‚ö° ${e.xp}</div>
    </div>`).join(''):'<div class="empty"><div class="e-ico">üèÜ</div>Play more to fill the leaderboard!</div>';
}
checkAchievements();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   LOGIN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let currentUser=null;
function openModal(id){document.getElementById(id).classList.add('open');}
function closeModal(id){document.getElementById(id).classList.remove('open');}
document.querySelectorAll('.modal').forEach(m=>{m.addEventListener('click',e=>{if(e.target===m)m.classList.remove('open');});});
document.getElementById('login-btn').addEventListener('click',()=>openModal('m-login'));
document.getElementById('login-close').addEventListener('click',()=>closeModal('m-login'));
function doLogin(name){
  if(!name||!name.trim())return;
  const n=name.trim().split('@')[0];
  const dn=n.charAt(0).toUpperCase()+n.slice(1);
  currentUser={name:dn,full:name.trim()};
  localStorage.setItem('learnai-user',JSON.stringify(currentUser));
  updateLoginUI();closeModal('m-login');
  showToast(`Welcome, ${dn}! üéâ`,'success');
  addXP(50,'first login bonus');
  unlockAch('first_login');
}
document.getElementById('do-login-btn').addEventListener('click',()=>{
  const v=document.getElementById('m-name').value.trim();
  if(!v){document.getElementById('m-name').focus();showToast('Please enter your name','warn');return;}
  doLogin(v);
});
document.getElementById('m-name').addEventListener('keydown',e=>{if(e.key==='Enter')document.getElementById('do-login-btn').click();});
document.getElementById('guest-btn').addEventListener('click',()=>doLogin('Guest'));
document.getElementById('logout-btn').addEventListener('click',()=>{
  localStorage.removeItem('learnai-user');currentUser=null;
  document.getElementById('user-info').style.display='none';
  document.getElementById('login-btn').style.display='inline-flex';
  showToast('Logged out. Progress saved locally.','info');
});
document.getElementById('reset-data-btn').addEventListener('click',()=>openModal('m-reset'));
document.getElementById('reset-close').addEventListener('click',()=>closeModal('m-reset'));
document.getElementById('reset-cancel-btn').addEventListener('click',()=>closeModal('m-reset'));
document.getElementById('reset-confirm-btn').addEventListener('click',()=>{
  ['learnai-xp','learnai-subs','learnai-goals','learnai-pom','learnai-user','learnai-visited','learnai-ach','learnai-lb','learnai-notes'].forEach(k=>localStorage.removeItem(k));
  closeModal('m-reset');showToast('All data erased. Starting fresh! üå±','info');
  setTimeout(()=>location.reload(),1200);
});
function updateLoginUI(){
  if(!currentUser)return;
  document.getElementById('user-greet').textContent=`üë§ ${currentUser.name}`;
  document.getElementById('user-info').style.display='flex';
  document.getElementById('login-btn').style.display='none';
}
(function(){const s=localStorage.getItem('learnai-user');if(s){try{currentUser=JSON.parse(s);updateLoginUI();}catch(e){}}})();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   VIDEO LIGHTBOX
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const vbox=document.getElementById('vbox'),vboxIframe=document.getElementById('vbox-iframe'),vboxTitle=document.getElementById('vbox-title'),vboxLink=document.getElementById('vbox-yt-link');
function openVideo(vid,title){
  vboxIframe.src=`https://www.youtube.com/embed/${vid}?autoplay=1&rel=0&modestbranding=1`;
  vboxTitle.textContent=title||'Video';vboxLink.href=`https://www.youtube.com/watch?v=${vid}`;
  vbox.classList.add('open');document.body.style.overflow='hidden';
}
function closeVideo(){vbox.classList.remove('open');vboxIframe.src='';document.body.style.overflow='';}
document.getElementById('vbox-close').addEventListener('click',closeVideo);
vbox.addEventListener('click',e=>{if(e.target===vbox)closeVideo();});
document.addEventListener('keydown',e=>{if(e.key==='Escape'){closeVideo();document.querySelectorAll('.modal.open').forEach(m=>m.classList.remove('open'));}});
document.querySelectorAll('.vid-thumb').forEach(t=>{t.addEventListener('click',()=>{if(t.dataset.vid)openVideo(t.dataset.vid,t.dataset.title);});});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   COURSE SEARCH & FILTER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const srchIn=document.getElementById('course-search'),clearBtn=document.getElementById('search-clear-btn');
let activeFilter='all';
function filterCourses(){
  const q=srchIn.value.toLowerCase().trim();
  clearBtn.style.display=q?'block':'none';
  document.querySelectorAll('.course-card').forEach(card=>{
    const tags=(card.dataset.tags||'').toLowerCase(),txt=card.querySelector('h3')?.textContent.toLowerCase()||'',desc=card.querySelector('p')?.textContent.toLowerCase()||'';
    const ms=!q||(tags+txt+desc).includes(q),mf=activeFilter==='all'||tags.includes(activeFilter);
    card.style.display=(ms&&mf)?'flex':'none';
  });
  document.querySelectorAll('.course-grid').forEach(grid=>{
    const vis=[...grid.querySelectorAll('.course-card')].some(c=>c.style.display!=='none');
    const prev=grid.previousElementSibling;
    if(prev&&prev.classList.contains('sec-head'))prev.style.display=vis?'flex':'none';
  });
}
srchIn.addEventListener('input',filterCourses);
clearBtn.addEventListener('click',()=>{srchIn.value='';filterCourses();});
document.getElementById('filter-pills').addEventListener('click',e=>{
  const p=e.target.closest('.fpill');if(!p)return;
  document.querySelectorAll('.fpill').forEach(x=>x.classList.remove('on'));
  p.classList.add('on');activeFilter=p.dataset.filter;filterCourses();
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   COURSE COMPLETION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function markDone(btn){
  const lang=btn.dataset.lang;
  if((xpData.completedCourses||[]).includes(lang)){showToast('Already completed!','info');return;}
  xpData.completedCourses=xpData.completedCourses||[];
  xpData.completedCourses.push(lang);
  localStorage.setItem('learnai-xp',JSON.stringify(xpData));
  const card=btn.closest('.course-card');
  card.classList.add('done');btn.style.display='none';
  const qb=card.querySelector('.quiz-btn');if(qb)qb.style.display='inline-flex';
  addXP(100,'course completed üéâ');
}
document.querySelectorAll('.mark-done-btn').forEach(btn=>{btn.addEventListener('click',()=>markDone(btn));});
document.querySelectorAll('.quiz-btn').forEach(btn=>{btn.addEventListener('click',()=>startPyQuiz(btn.dataset.lang));});
function loadDoneStatus(){
  (xpData.completedCourses||[]).forEach(lang=>{
    const btn=document.querySelector(`.mark-done-btn[data-lang="${lang}"]`);if(!btn)return;
    btn.style.display='none';btn.closest('.course-card')?.classList.add('done');
    const qb=btn.closest('.course-card')?.querySelector('.quiz-btn');if(qb)qb.style.display='inline-flex';
  });
}
loadDoneStatus();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   PYTHON QUIZ (30 Questions)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const pyQs=[
  {q:"Correct way to declare a variable in Python?",opts:["var x = 5;","x = 5","int x = 5;","let x = 5;"],a:1},
  {q:"Output of print(2 ** 3)?",opts:["6","8","9","5"],a:1},
  {q:"Which keyword defines a function?",opts:["func","def","function","define"],a:1},
  {q:"How to create an empty list?",opts:["list = {}","list = []","list = ()","list = <>"],a:1},
  {q:"Which character starts a Python comment?",opts:["//","/* */","#","--"],a:2},
  {q:"What does len() return?",opts:["The type","The length","The sum","The maximum"],a:1},
  {q:"Which data structure is mutable?",opts:["Tuple","List","String","All immutable"],a:1},
  {q:"What is 'hello'.upper()?",opts:["hello","HELLO","Hello","Error"],a:1},
  {q:"Correct way to import the math module?",opts:["include math","import math","from math","use math"],a:1},
  {q:"Purpose of if __name__ == '__main__':?",opts:["Define main","Run only when executed directly","Create loop","Import"],a:1},
  {q:"Output of: for i in range(5): print(i)?",opts:["1 2 3 4 5","0 1 2 3 4","5 4 3 2 1","Error"],a:1},
  {q:"Best loop when iteration count is known?",opts:["while","for","do-while","repeat"],a:1},
  {q:"Correct if-statement syntax?",opts:["if x > 5 then:","if x > 5:","if (x > 5)","if x > 5 do"],a:1},
  {q:"How to access first element of my_list?",opts:["my_list[1]","my_list.first","my_list[0]","my_list.get(0)"],a:2},
  {q:"What does the 'in' keyword test?",opts:["Only dict keys","Membership in any iterable","Only lists","None"],a:1},
  {q:"Which method adds to end of a list?",opts:[".add()",".append()",".push()",".insert(0)"],a:1},
  {q:"A Python dictionary stores?",opts:["Ordered list","Key-value pairs","Immutable set","Sequence"],a:1},
  {q:"How to create a tuple?",opts:["{}","[]","()","<>"],a:2},
  {q:"Exception when dividing by zero?",opts:["ValueError","ZeroDivisionError","TypeError","IndexError"],a:1},
  {q:"Open a file for reading?",opts:["open('file.txt', 'r')","read('file.txt')","file.open()","File('file.txt')"],a:0},
  {q:"Difference between == and is?",opts:["== value equality, is identity","Both the same","is for values","== for identity"],a:0},
  {q:"How to define a class in Python?",opts:["class MyClass:","def MyClass:","class: MyClass","MyClass = class"],a:0},
  {q:"What does 'self' represent in class methods?",opts:["Reference to the instance","A variable","The class itself","None"],a:0},
  {q:"Correct syntax for inheritance?",opts:["class Child(Parent):","class Child inherits Parent","Child : Parent","inherit Parent"],a:0},
  {q:"What does lambda create?",opts:["Anonymous function","A loop","A class","A variable"],a:0},
  {q:"How to sort a list in-place?",opts:[".sort()",".sorted()","sort(list)","order()"],a:0},
  {q:"What does [1,2,3] + [4,5] produce?",opts:["[1,2,3,4,5]","Error","12345","[1,2,3][4,5]"],a:0},
  {q:"Which function reads user input?",opts:["input()","get()","read()","scanf()"],a:0},
  {q:"Which module handles regular expressions?",opts:["regex","re","regexp","pattern"],a:1},
  {q:"What does pip do?",opts:["Python package installer","Python interpreter","Print function","None"],a:0}
];
let cfcIdx=0,cfcScore=0,cfcSel=null;
function startPyQuiz(lang){
  cfcIdx=0;cfcScore=0;cfcSel=null;
  document.getElementById('m-quiz-title').textContent='Python Mastery Quiz ‚Äî 30 Questions';
  document.getElementById('m-result').style.display='none';
  document.getElementById('m-next').style.display='block';
  document.getElementById('m-next').style.opacity='.4';
  document.getElementById('m-next').style.pointerEvents='none';
  renderPyQ();openModal('m-quiz');
}
function renderPyQ(){
  const q=pyQs[cfcIdx];
  document.getElementById('m-qn').textContent=cfcIdx+1;
  document.getElementById('m-qtext').textContent=q.q;
  document.getElementById('m-opts').innerHTML=q.opts.map((o,i)=>`<button class="m-opt" data-i="${i}">${String.fromCharCode(65+i)}. ${o}</button>`).join('');
  cfcSel=null;
  const nb=document.getElementById('m-next');nb.style.opacity='.4';nb.style.pointerEvents='none';
  document.querySelectorAll('.m-opt').forEach(btn=>{
    btn.addEventListener('click',()=>{
      document.querySelectorAll('.m-opt').forEach(b=>b.classList.remove('sel'));
      btn.classList.add('sel');cfcSel=parseInt(btn.dataset.i);
      nb.style.opacity='1';nb.style.pointerEvents='auto';
    });
  });
}
document.getElementById('m-next').addEventListener('click',()=>{
  if(cfcSel===null)return;
  if(cfcSel===pyQs[cfcIdx].a)cfcScore++;
  cfcIdx++;
  if(cfcIdx<pyQs.length){renderPyQ();}
  else{
    const pct=Math.round(cfcScore/pyQs.length*100);
    document.getElementById('m-score').textContent=`${cfcScore}/30 (${pct}%)`;
    document.getElementById('m-msg').textContent=pct>=90?'üèÜ Outstanding! You are job-ready.':pct>=70?'üéâ Great work! Review a few topics.':pct>=50?'üëç Good effort. Revisit the playlist.':'üí™ Keep learning ‚Äî you\'ve got this!';
    document.getElementById('m-result').style.display='block';
    document.getElementById('m-opts').innerHTML='';document.getElementById('m-qtext').innerHTML='';
    document.getElementById('m-next').style.display='none';
    addXP(pct,'quiz completed');
    if(pct>=80)unlockAch('quiz_pass');
  }
});
document.getElementById('quiz-close').addEventListener('click',()=>closeModal('m-quiz'));
document.getElementById('quiz-done-btn').addEventListener('click',()=>closeModal('m-quiz'));
document.getElementById('quiz-restart-btn').addEventListener('click',()=>startPyQuiz('python'));

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MULTILINGUAL TEXT ENGINE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function isArabicText(text){
  const ar=(text.match(/[\u0600-\u06FF]/g)||[]).length;
  const tot=(text.match(/[a-zA-Z\u0600-\u06FF]/g)||[]).length;
  return tot>0&&(ar/tot)>0.4;
}
const AR_SW=new Set('ŸÅŸä ŸÖŸÜ ÿ•ŸÑŸâ ÿπŸÑŸâ ÿ£ŸÜ Ÿáÿ∞ÿß Ÿáÿ∞Ÿá ÿ∞ŸÑŸÉ ÿ™ŸÑŸÉ ŸÉÿßŸÜ ŸÉÿßŸÜÿ™ ŸäŸÉŸàŸÜ ŸÖÿß ŸÖÿπ ÿπŸÜ ÿ£Ÿà ŸÑÿß ŸÑŸÖ ŸÑŸÜ ŸÇÿØ ŸÉŸÑ ŸÉŸÖÿß ÿ£Ÿäÿ∂ÿßŸã ÿ≠ÿ™Ÿâ ÿ®ÿπÿØ ŸÇÿ®ŸÑ ÿπŸÜÿØ ŸáŸà ŸáŸä ŸáŸÖ ŸáŸÜ ŸÜÿ≠ŸÜ ÿ£ŸÜÿ™ ÿ£ŸÜÿß ÿßŸÑÿ™Ÿä ÿßŸÑÿ∞Ÿä ÿßŸÑÿ∞ŸäŸÜ ÿßŸÑŸÑÿ∞ÿßŸÜ ÿßŸÑŸÑÿ™ÿßŸÜ ŸàŸÇÿØ ŸàŸÉÿßŸÜ ŸÅÿ•ŸÜ ŸÅŸÇÿØ ÿ´ŸÖ ÿ£ŸÖÿß ÿ•ÿ∞ÿß ŸÉŸäŸÅ ŸÑÿ£ŸÜ ÿ≠ŸäŸÜ ŸÖŸÜÿ∞ ÿÆŸÑÿßŸÑ ÿπÿ®ÿ± ÿ®ŸäŸÜ ŸàŸÅŸä ŸàÿπŸÑŸâ ŸàŸÖŸÜ Ÿàÿ•ŸÑŸâ ÿ•ŸÜ ÿ£Ÿä ÿ®ŸÑ ŸÑŸÉŸÜ ŸÑŸÉŸä ŸÉŸä ŸÑŸà ŸÑŸàŸÑÿß ÿ≠Ÿäÿ´ ŸàŸáŸà ŸàŸáŸä ŸàŸáŸÖ ÿ£ŸÜŸá ÿ£ŸÜŸáÿß ÿ£ŸÜŸáŸÖ ÿ£ŸÜŸÜÿß Ÿáÿ∞ÿßŸÜ Ÿáÿßÿ™ÿßŸÜ Ÿáÿ§ŸÑÿßÿ° ÿ£ŸàŸÑÿ¶ŸÉ ŸÑŸäÿ≥ ŸÑÿ≥ÿ™ ŸàÿßŸÑÿ™Ÿä ŸàÿßŸÑÿ∞Ÿä Ÿäÿ™ŸÖ ÿ™ŸÖ ÿ®ŸÖÿß ŸàŸÖÿß ŸÅŸÖÿß ŸÑŸÖÿß ŸÅÿ£ŸÜ ŸàŸÑÿß ŸÅŸÑÿß Ÿàÿ•ŸÜ ŸÅÿ•ÿ∞ÿß ŸÉÿ∞ŸÑŸÉ ŸàŸÑŸÉŸÜ ŸÖŸÖÿß ŸàŸÉŸÑ ÿ•ŸÜŸá ÿ•ŸÜŸáÿß ÿ•ŸÜŸáŸÖ ÿ•ŸÜŸÜÿß ÿ•ŸÜŸÉ ÿ•ŸÜŸä ÿ•ŸÜŸÉŸÖ ÿ•ŸÜŸÉŸÜ ÿ£ŸÜŸÉŸÖ ÿ£ŸÜŸÉŸÜ ÿ•ŸÑÿß ÿ∫Ÿäÿ± ÿ≥ŸàŸâ ÿ®ÿπÿ∂'.split(' '));
const EN_SW=new Set('the is in and to a of for on with by it as this that an be are or at from was were has have had not but they we you he she its their our will can all when which who what how more also been into do about so up if no than then these those some such other there'.split(' '));
function tokenize(text,isAr){
  if(isAr)return text.replace(/[\u064B-\u065F\u0640]/g,'').replace(/[^\u0600-\u06FF\s]/g,' ').split(/\s+/).filter(w=>w.length>=2);
  return text.replace(/[^a-zA-Z0-9 ]/g,' ').toLowerCase().split(/\s+/).filter(Boolean);
}
function splitSents(text,isAr){
  const raw=isAr?text.match(/[^.!?ÿü\n]+[.!?ÿü\n]?/g)||[text]:text.match(/[^.!?]+[.!?]+/g)||[text];
  return raw.map(s=>s.trim()).filter(s=>s.length>(isAr?8:20));
}
function wordFreq(text,isAr){
  const sw=isAr?AR_SW:EN_SW,min=isAr?2:3,freq={};
  tokenize(text,isAr).forEach(w=>{const wl=isAr?w:w.toLowerCase();if(wl.length>=min&&!sw.has(wl))freq[wl]=(freq[wl]||0)+1;});
  return freq;
}
function scoreSents(sents,freq,isAr){
  return sents.map(s=>{let sc=0;tokenize(s,isAr).forEach(w=>{const wl=isAr?w:w.toLowerCase();if(freq[wl])sc+=freq[wl];});return{s:s.trim(),score:sc};});
}
function applyDir(el,isAr){el.style.direction=isAr?'rtl':'ltr';el.style.textAlign=isAr?'right':'left';}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GRADES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let subjects=JSON.parse(localStorage.getItem('learnai-subs')||'[]');
function gcls(g){return g>=90?'gA':g>=75?'gB':g>=60?'gC':g>=50?'gD':'gF';}
function glbl(g){return g>=90?'A':g>=75?'B':g>=60?'C':g>=50?'D':'F';}
function renderSubs(){
  const el=document.getElementById('grades-list');el.innerHTML='';
  if(!subjects.length){
    el.innerHTML='<div class="empty"><div class="e-ico">üìö</div>No subjects yet ‚Äî add one below</div>';
    document.getElementById('stats-sec').style.display='none';
    document.getElementById('rings-section').style.display='none';
    document.getElementById('hs-avg').textContent='‚Äî';document.getElementById('hs-subs').textContent='0';
    document.getElementById('hs-best').textContent='‚Äî';document.getElementById('hs-hrs').textContent='0h';return;
  }
  subjects.forEach((s,i)=>{
    const d=document.createElement('div');d.className='sub-row';
    d.innerHTML=`<span class="sub-name">${s.n} <span style="font-size:.7rem;color:var(--muted)">(${['','Easy','Medium','Hard'][s.d||2]})</span></span><span class="grade-badge ${gcls(s.g)}">${glbl(s.g)} ¬∑ ${s.g}%</span><button class="btn btn-danger" data-i="${i}">‚úï</button>`;
    d.querySelector('button').addEventListener('click',()=>{subjects.splice(i,1);localStorage.setItem('learnai-subs',JSON.stringify(subjects));renderSubs();});
    el.appendChild(d);
  });
  updateStats();
  if(subjects.length>=5)unlockAch('grades5');
}
function updateStats(){
  const sec=document.getElementById('stats-sec');
  if(!subjects.length){sec.style.display='none';return;}
  sec.style.display='block';
  const avg=subjects.reduce((a,b)=>a+b.g,0)/subjects.length;
  const best=subjects.reduce((a,b)=>a.g>b.g?a:b);
  const worst=subjects.reduce((a,b)=>a.g<b.g?a:b);
  const totalHrs=subjects.reduce((a,s)=>a+TIERS.find(t=>s.g<(t.max||101)).wh,0);
  document.getElementById('hs-avg').textContent=avg.toFixed(1)+'%';
  document.getElementById('hs-subs').textContent=subjects.length;
  document.getElementById('hs-best').textContent=best.n.substring(0,10);
  document.getElementById('hs-hrs').textContent=totalHrs+'h';
  document.getElementById('stats-bar').innerHTML=`
    <div class="stat-box"><div class="stat-val">${avg.toFixed(1)}%</div><div class="stat-lbl">Overall Avg</div></div>
    <div class="stat-box"><div class="stat-val" style="background:linear-gradient(135deg,var(--success),var(--a5));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">${best.n.substring(0,8)}</div><div class="stat-lbl">Strongest</div></div>
    <div class="stat-box"><div class="stat-val" style="background:linear-gradient(135deg,var(--danger),var(--warn));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text">${worst.n.substring(0,8)}</div><div class="stat-lbl">Focus Here</div></div>`;
  buildRings();
  buildSchedule(avg);
}
function buildRings(){
  document.getElementById('rings-section').style.display='block';
  const wrap=document.getElementById('rings-wrap');
  const R=38,CIRCUM=2*Math.PI*R;
  wrap.innerHTML=subjects.slice(0,8).map(s=>{
    const pct=s.g/100,color=s.g>=80?'#34d399':s.g>=60?'#818cf8':s.g>=50?'#fbbf24':'#f87171';
    const offset=CIRCUM*(1-pct);
    return `<div class="ring-item">
      <svg width="90" height="90" viewBox="0 0 90 90">
        <circle cx="45" cy="45" r="${R}" fill="none" stroke="var(--border)" stroke-width="6"/>
        <circle cx="45" cy="45" r="${R}" fill="none" stroke="${color}" stroke-width="6" stroke-linecap="round"
          stroke-dasharray="${CIRCUM}" stroke-dashoffset="${offset}" transform="rotate(-90 45 45)" style="transition:stroke-dashoffset 1s ease"/>
        <text x="45" y="45" text-anchor="middle" dominant-baseline="central" fill="${color}" font-size="14" font-weight="700" font-family="Syne">${s.g}%</text>
      </svg>
      <div class="ring-label">${s.n.substring(0,10)}</div>
    </div>`;
  }).join('');
}
document.getElementById('add-sub-btn').addEventListener('click',addSubject);
document.getElementById('new-sub').addEventListener('keydown',e=>{if(e.key==='Enter')addSubject();});
function addSubject(){
  const n=document.getElementById('new-sub').value.trim();
  const g=parseInt(document.getElementById('new-grade').value);
  const d=parseInt(document.getElementById('new-diff').value);
  if(!n||isNaN(g)||g<0||g>100){showToast('Enter a valid subject and grade (0‚Äì100)','warn');return;}
  subjects.push({n,g,d});localStorage.setItem('learnai-subs',JSON.stringify(subjects));
  document.getElementById('new-sub').value='';document.getElementById('new-grade').value='';
  renderSubs();addXP(10,'subject added');showToast(n+' added!','success');
}
const TIERS=[
  {id:'critical',lbl:'Critical ‚Äî Intensive Recovery',max:50,range:'0‚Äì49',em:'üö®',col:'var(--danger)',raw:'rgba(248,113,113,.65)',bdr:'rgba(248,113,113,.28)',bg:'rgba(248,113,113,.03)',wh:14,
   sched:[{d:'Monday',f:'Concept re-learning (videos)',t:'2h'},{d:'Tuesday',f:'Worked examples',t:'2h'},{d:'Wednesday',f:'Flashcard drills',t:'2h'},{d:'Thursday',f:'Past exam questions',t:'2h'},{d:'Friday',f:'Tutoring / peer study',t:'2h'},{d:'Saturday',f:'Full topic review',t:'2h'},{d:'Sunday',f:'Rest + light flashcards',t:'30min'}],
   str:['üìñ Re-read the textbook chapter before any exercises.','üé• Watch one video tutorial per concept you struggle with.','‚úçÔ∏è Write solutions by hand ‚Äî motor memory reinforces learning.','ü§ù Book a tutoring session or visit office hours this week.','üìã Keep an error log: write every mistake and why you made it.']},
  {id:'building',lbl:'Building ‚Äî Reinforcement & Practice',max:80,range:'50‚Äì79',em:'üìà',col:'var(--warn)',raw:'rgba(251,191,36,.65)',bdr:'rgba(251,191,36,.28)',bg:'rgba(251,191,36,.03)',wh:9,
   sched:[{d:'Monday',f:'Practice problem set',t:'1.5h'},{d:'Tuesday',f:'Target weak sub-topics',t:'1.5h'},{d:'Wednesday',f:'Self-quiz + spaced repetition',t:'1h'},{d:'Thursday',f:'Timed past-paper questions',t:'1.5h'},{d:'Friday',f:"Summarise week's learning",t:'1h'},{d:'Saturday',f:'Full practice test',t:'1.5h'},{d:'Sunday',f:'Rest + optional flashcards',t:'30min'}],
   str:['üéØ The gap from 70 to 80 is usually just a few recurring mistakes.','üîÅ Active recall: close your notes and write everything you remember.','‚è± Practice under timed conditions to build exam speed.','üîó Connect topics ‚Äî links between concepts boost retention.','üìä Track which question types you get wrong and drill those.']},
  {id:'mastery',lbl:'Mastery ‚Äî Maintenance & Enrichment',max:101,range:'80‚Äì100',em:'üèÜ',col:'var(--success)',raw:'rgba(52,211,153,.65)',bdr:'rgba(52,211,153,.28)',bg:'rgba(52,211,153,.03)',wh:4,
   sched:[{d:'Monday',f:'Teach a concept or write notes',t:'1h'},{d:'Wednesday',f:'Advanced / extension material',t:'1h'},{d:'Friday',f:'Spaced repetition flashcards',t:'15min'},{d:'Saturday',f:'Challenge / competition problem',t:'1h'},{d:'Sunday',f:'Rest',t:'‚Äî'}],
   str:['üßë‚Äçüè´ Solidify mastery by teaching others ‚Äî tutor a classmate.','üöÄ Explore enrichment: research papers, open courses, competitions.','üîÑ Maintain with spaced repetition (15 min/day) not long sessions.','üèÖ Set a stretch goal: aim for the top 1% on practice exams.','üåê Apply knowledge to real-world projects.']}
];
let chartInst;
function buildSchedule(avg){
  const groups={critical:[],building:[],mastery:[]};
  const lbls=[],data=[],cols=[];
  subjects.forEach(s=>{const t=TIERS.find(x=>s.g<x.max);groups[t.id].push(s);lbls.push(s.n);data.push(s.g);cols.push(t.raw);});
  let html='';
  TIERS.forEach(t=>{
    const subs=groups[t.id];if(!subs.length)return;
    html+=`<div style="border:1px solid ${t.bdr};border-radius:16px;overflow:hidden;margin-bottom:18px;background:${t.bg}">
      <div style="padding:13px 17px;border-bottom:1px solid ${t.bdr};display:flex;align-items:center;gap:10px">
        <span style="font-size:1.2rem">${t.em}</span>
        <div><div style="font-weight:700;color:${t.col};font-family:var(--font-display)">${t.lbl}</div>
        <div style="font-size:.7rem;color:var(--muted)">Score range: ${t.range} ¬∑ ${t.wh}h recommended/week</div></div>
      </div>
      <div style="padding:13px 17px;border-bottom:1px solid ${t.bdr}">
        ${subs.map(s=>`<div style="display:flex;align-items:center;justify-content:space-between;padding:8px 12px;background:var(--s2);border-radius:8px;margin-bottom:5px"><span style="font-weight:500;font-size:.9rem">${s.n}</span><span class="grade-badge ${gcls(s.g)}">${s.g}%</span></div>`).join('')}
      </div>
      <div style="padding:13px 17px;border-bottom:1px solid ${t.bdr}">
        <table class="sched-table"><thead><tr><th>Day</th><th>Focus</th><th>Time</th></tr></thead><tbody>
          ${t.sched.map(r=>`<tr><td style="font-weight:600;color:${t.col};white-space:nowrap">${r.d}</td><td style="color:var(--muted)">${r.f}</td><td><span style="font-family:var(--font-mono);font-size:.8rem">${r.t}</span></td></tr>`).join('')}
        </tbody></table>
      </div>
      <div style="padding:13px 17px">${t.str.map(s=>`<div style="padding:6px 0;font-size:.84rem;border-bottom:1px solid var(--border)">${s}</div>`).join('')}</div>
    </div>`;
  });
  document.getElementById('sched-out').innerHTML=html;
  document.getElementById('chart-wrap').style.display='block';
  const ctx=document.getElementById('gc').getContext('2d');
  if(chartInst)chartInst.destroy();
  const zoneBg={id:'zb',beforeDraw(c){const{ctx:x,chartArea:{left,right},scales:{y}}=c;[{f:0,t:50,c:'rgba(248,113,113,.04)'},{f:50,t:80,c:'rgba(251,191,36,.04)'},{f:80,t:100,c:'rgba(52,211,153,.04)'}].forEach(z=>{const yT=y.getPixelForValue(z.t),yB=y.getPixelForValue(z.f);x.save();x.fillStyle=z.c;x.fillRect(left,yT,right-left,yB-yT);x.restore();})}};
  chartInst=new Chart(ctx,{type:'bar',plugins:[zoneBg],data:{labels:lbls,datasets:[{label:'Grade (%)',data,backgroundColor:cols,borderRadius:8,order:1},{label:'Average',data:subjects.map(()=>avg),type:'line',borderColor:'rgba(129,140,248,.4)',backgroundColor:'transparent',borderDash:[5,4],pointRadius:0,order:0}]},options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{labels:{color:'var(--muted)',font:{family:'Inter'}}}},scales:{y:{beginAtZero:true,max:100,grid:{color:'rgba(255,255,255,.03)'},ticks:{color:v=>{const n=v.tick.value;return n<=50?'#f87171':n<=80?'#fbbf24':'#34d399';}}},x:{grid:{display:false},ticks:{color:'var(--muted)'}}}}});
  buildAITips(avg);
}
function buildAITips(avg){
  const cr=subjects.filter(s=>s.g<50),bu=subjects.filter(s=>s.g>=50&&s.g<80),ma=subjects.filter(s=>s.g>=80);
  const tips=[];
  if(cr.length)tips.push(`üö® <strong>${cr.map(s=>s.n).join(', ')}</strong> ‚Äî Critical (0‚Äì49). Allocate ${TIERS[0].wh}h/week and seek tutoring.`);
  if(bu.length)tips.push(`üìà <strong>${bu.map(s=>s.n).join(', ')}</strong> ‚Äî Building (50‚Äì79). Target ${TIERS[1].wh}h/week focusing on error elimination.`);
  if(ma.length)tips.push(`üèÜ <strong>${ma.map(s=>s.n).join(', ')}</strong> ‚Äî Mastery (80+). Only ${TIERS[2].wh}h/week needed ‚Äî teach others to cement it.`);
  tips.push(avg<50?`üß† Overall <strong>${avg.toFixed(1)}%</strong> ‚Äî Critical. Talk to your teacher about a recovery plan.`:avg<80?`üí™ Overall <strong>${avg.toFixed(1)}%</strong> ‚Äî Building. Daily short sessions beat cramming.`:`üåü Overall <strong>${avg.toFixed(1)}%</strong> ‚Äî Mastery! Maintain with spaced repetition.`);
  document.getElementById('ai-tips').innerHTML=tips.map(t=>`<div class="ai-bub"><div class="ai-lbl">AI Insight</div><p>${t}</p></div>`).join('');
}
renderSubs();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SUMMARIZER
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
document.getElementById('sum-btn').addEventListener('click',doSummarize);
document.getElementById('sum-clear').addEventListener('click',()=>{
  document.getElementById('sum-in').value='';
  document.getElementById('sum-out').textContent='';
  document.getElementById('sum-terms').innerHTML='';
  document.getElementById('sum-card').style.display='none';
});
document.getElementById('sum-copy-btn')?.addEventListener('click',()=>{
  const txt=document.getElementById('sum-out').textContent;
  navigator.clipboard.writeText(txt).then(()=>showToast('Summary copied!','success'));
});
function doSummarize(){
  const text=document.getElementById('sum-in').value.trim();
  if(!text){showToast('Paste some text first.','warn');return;}
  const isAr=isArabicText(text);
  const sents=splitSents(text,isAr);
  const freq=wordFreq(text,isAr);
  const n=Math.min(Math.max(3,Math.floor(sents.length*.3)),7);
  const top=[...scoreSents(sents,freq,isAr)].sort((a,b)=>b.score-a.score).slice(0,n);
  top.sort((a,b)=>sents.findIndex(s=>s.trim()===a.s)-sents.findIndex(s=>s.trim()===b.s));
  const sumOut=document.getElementById('sum-out');
  sumOut.textContent=top.map(x=>x.s).join(' ');
  applyDir(sumOut,isAr);
  const terms=Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,14);
  const termsEl=document.getElementById('sum-terms');
  termsEl.innerHTML=terms.map(([w])=>`<span class="term">${w}</span>`).join('');
  applyDir(termsEl,isAr);
  const wc=text.split(/\s+/).filter(Boolean).length,rt=Math.ceil(wc/(isAr?180:200));
  document.getElementById('sum-stats').textContent=`${wc} ${isAr?'ŸÉŸÑŸÖÿ©':'words'} ¬∑ ${sents.length} ${isAr?'ÿ¨ŸÖŸÑÿ©':'sentences'} ¬∑ ~${rt} ${isAr?'ÿØŸÇŸäŸÇÿ© ŸÇÿ±ÿßÿ°ÿ©':'min read'} ¬∑ Reduced to ${top.length} sentences`;
  document.getElementById('sum-lang-badge').innerHTML=isAr?'<div class="lang-badge">üåê Arabic detected ‚Äî RTL mode</div>':'';
  document.getElementById('sum-card').style.display='block';
  addXP(15,'lesson summarized');
  showToast(isAr?'ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖŸÑÿÆÿµ! ‚ú®':'Summary ready!','success');
  unlockAch('summary');
  // Save as note if checkbox ticked
  if(document.getElementById('sum-save-note').checked){
    const title='Summary '+(new Date().toLocaleDateString());
    saveNote(null,title,top.map(x=>x.s).join('\n\n'));
    showToast('Saved as a note!','success');
    unlockAch('note');
  }
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   QUIZ (AI-generated)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let qxQs=[],qxIdx=0,qxSc=0,qxAns=false,qxIsAr=false;
document.getElementById('quiz-gen-btn').addEventListener('click',genQuiz);
document.getElementById('qx-next').addEventListener('click',qxNext);
function genQuiz(){
  const text=document.getElementById('qx-in').value.trim();
  const maxQ=parseInt(document.getElementById('qx-count').value)||10;
  if(text.split(/\s+/).length<15){showToast(isArabicText(text)?'ÿ£ÿ∂ŸÅ ŸÜÿµÿßŸã ÿ£ÿ∑ŸàŸÑ':'Enter at least a few sentences.','warn');return;}
  qxIsAr=isArabicText(text);
  const sents=splitSents(text,qxIsAr),freq=wordFreq(text,qxIsAr),sw=qxIsAr?AR_SW:EN_SW,minLen=qxIsAr?2:4;
  qxQs=[];
  sents.slice(0,maxQ+5).forEach(sent=>{
    if(sent.trim().length<(qxIsAr?10:30))return;
    const tokens=tokenize(sent,qxIsAr);
    const cw=tokens.filter(w=>{const wl=qxIsAr?w:w.toLowerCase();return wl.length>=minLen&&!sw.has(wl)&&freq[wl]>=1;});
    if(!cw.length)return;
    const aw=cw.sort((a,b)=>(freq[qxIsAr?b:b.toLowerCase()]||0)-(freq[qxIsAr?a:a.toLowerCase()]||0))[0];
    if(!aw)return;
    const awEsc=aw.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
    const q=sent.replace(new RegExp(awEsc,qxIsAr?'u':'iu'),'______');
    if(q===sent)return;
    const allW=tokenize(text,qxIsAr).filter(w=>{const wl=qxIsAr?w:w.toLowerCase();return wl.length>=minLen&&!sw.has(wl)&&w!==aw&&(qxIsAr?w:w.toLowerCase())!==(qxIsAr?aw:aw.toLowerCase());});
    const dist=[...new Set(allW)].sort(()=>Math.random()-.5).slice(0,3);
    if(!dist.length)return;
    const opts=[aw,...dist].sort(()=>Math.random()-.5).slice(0,4);
    if(opts.length>=2)qxQs.push({q,a:aw,opts,isAr:qxIsAr});
  });
  qxQs=qxQs.slice(0,maxQ);
  if(!qxQs.length){showToast(qxIsAr?'ŸÑŸÖ Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑŸÜÿ∏ÿßŸÖ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ£ÿ≥ÿ¶ŸÑÿ© ‚Äî ÿ¨ÿ±ÿ® ŸÜÿµÿßŸã ÿ£ÿ∑ŸàŸÑ':'Couldn\'t extract questions. Try more detailed text.','warn');return;}
  qxIdx=0;qxSc=0;qxAns=false;
  document.getElementById('qx-area').style.display='block';
  document.getElementById('qx-result').style.display='none';
  renderQxQ();
}
function renderQxQ(){
  if(qxIdx>=qxQs.length){showQxResult();return;}
  qxAns=false;
  const q=qxQs[qxIdx],isAr=q.isAr;
  document.getElementById('qx-score').textContent=isAr?`ÿßŸÑÿ≥ÿ§ÿßŸÑ ${qxIdx+1} ŸÖŸÜ ${qxQs.length} ¬∑ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©: ${qxSc}`:`Question ${qxIdx+1} of ${qxQs.length} ¬∑ Score: ${qxSc}`;
  document.getElementById('qx-next').style.display='none';
  const qWrap=document.getElementById('qx-q-wrap');
  qWrap.innerHTML=`<div class="qx-q ${isAr?'rtl':''}">${isAr?'ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÅÿ±ÿßÿ∫: ':'Fill in the blank: '}<em>${q.q}</em></div><div class="qx-opts" id="qx-opts-wrap"></div>`;
  const wrap=document.getElementById('qx-opts-wrap');
  q.opts.forEach(o=>{
    const btn=document.createElement('button');
    btn.className=`qx-opt ${isAr?'rtl':''}`;btn.textContent=o;
    btn.addEventListener('click',()=>checkQx(btn,o,q.a));wrap.appendChild(btn);
  });
}
function checkQx(btn,chosen,correct){
  if(qxAns)return;qxAns=true;
  const isAr=qxQs[qxIdx].isAr;
  document.querySelectorAll('.qx-opt').forEach(b=>{if(b.textContent===correct)b.classList.add('correct');else if(b===btn&&chosen!==correct)b.classList.add('wrong');b.disabled=true;});
  if(chosen===correct)qxSc++;
  document.getElementById('qx-score').textContent=isAr?`ÿßŸÑÿ≥ÿ§ÿßŸÑ ${qxIdx+1} ŸÖŸÜ ${qxQs.length} ¬∑ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©: ${qxSc}`:`Question ${qxIdx+1} of ${qxQs.length} ¬∑ Score: ${qxSc}`;
  document.getElementById('qx-next').style.display='inline-flex';
}
function qxNext(){qxIdx++;if(qxIdx>=qxQs.length)showQxResult();else renderQxQ();}
function showQxResult(){
  const pct=Math.round(qxSc/qxQs.length*100),isAr=qxIsAr;
  const msg=pct>=90?(isAr?'üéâ ŸÖŸÖÿ™ÿßÿ≤!':'üéâ Excellent!'):pct>=60?(isAr?'üëç ÿ¨ŸäÿØ!':'üëç Good effort!'):isAr?'üìö ÿßÿ≥ÿ™ŸÖÿ±!':'üìö Keep studying!';
  document.getElementById('qx-q-wrap').innerHTML='';document.getElementById('qx-next').style.display='none';
  const r=document.getElementById('qx-result');
  r.innerHTML=`${msg} ${isAr?'ÿ≠ÿµŸÑÿ™ ÿπŸÑŸâ':'You scored'} <strong>${qxSc}/${qxQs.length}</strong> (${pct}%). <br><br><button class="btn btn-secondary btn-sm" id="qx-retry">${isAr?'ÿ≠ÿßŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿÆÿ±Ÿâ':'Try Again'}</button>`;
  r.style.display='block';if(isAr)applyDir(r,true);
  document.getElementById('qx-retry')?.addEventListener('click',genQuiz);
  addXP(pct/2|0,'quiz completed');
  if(pct>=80)unlockAch('quiz_pass');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FLASHCARDS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let fcs=[],fcI=0,fcIsAr=false,fcConf={easy:0,medium:0,hard:0};
document.getElementById('fc-gen-btn').addEventListener('click',genFlashcards);
document.getElementById('fc-scene').addEventListener('click',flipFC);
document.getElementById('fc-prev').addEventListener('click',fcPrev);
document.getElementById('fc-next').addEventListener('click',fcNext);
document.getElementById('fc-shuffle').addEventListener('click',()=>{
  fcs.sort(()=>Math.random()-.5);fcI=0;renderFC();showToast('Shuffled!','info');
});
document.querySelectorAll('[data-conf]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const conf=btn.dataset.conf;fcConf[conf]++;
    fcNext();updateFCStats();
  });
});
function genFlashcards(){
  const text=document.getElementById('fc-in').value.trim();
  if(!text){showToast('Paste some content first.','warn');return;}
  fcIsAr=isArabicText(text);
  const sw=fcIsAr?AR_SW:EN_SW,minLen=fcIsAr?2:4;
  const sents=splitSents(text,fcIsAr),freq=wordFreq(text,fcIsAr);
  fcs=[];fcConf={easy:0,medium:0,hard:0};
  sents.forEach(sent=>{
    if(sent.trim().length<(fcIsAr?10:30))return;
    const tokens=tokenize(sent,fcIsAr);
    const cw=tokens.filter(w=>{const wl=fcIsAr?w:w.toLowerCase();return wl.length>=minLen&&!sw.has(wl);})
      .sort((a,b)=>(freq[fcIsAr?b:b.toLowerCase()]||0)-(freq[fcIsAr?a:a.toLowerCase()]||0));
    if(!cw.length)return;
    const kw=cw[0];
    fcs.push({f:kw.charAt(0).toUpperCase()+kw.slice(1),b:sent.trim(),isAr:fcIsAr});
  });
  if(!fcs.length){showToast(fcIsAr?'ŸÑŸÖ Ÿäÿ™ŸÖŸÉŸÜ ÿßŸÑŸÜÿ∏ÿßŸÖ ŸÖŸÜ ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿ®ÿ∑ÿßŸÇÿßÿ™':'Could not extract flashcards.','warn');return;}
  fcI=0;
  document.getElementById('fc-area').style.display='block';
  document.getElementById('fc-confidence').style.display='flex';
  document.getElementById('fc-stats').style.display='none';
  renderFC();showToast(fcIsAr?`ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ${fcs.length} ÿ®ÿ∑ÿßŸÇÿ©!`:`${fcs.length} flashcards created!`,'success');
  addXP(20,'flashcards created');unlockAch('flashcard');
}
function renderFC(){
  document.getElementById('fc-card').classList.remove('flipped');
  const card=fcs[fcI],isAr=card.isAr;
  const ft=document.getElementById('fc-front-txt'),bt=document.getElementById('fc-back-txt');
  ft.textContent=card.f;bt.textContent=card.b;
  [ft,bt].forEach(el=>{el.classList.toggle('rtl',isAr);applyDir(el,isAr);});
  document.getElementById('fc-ctr').textContent=`${fcI+1} / ${fcs.length}`;
  document.getElementById('fc-prog').style.width=((fcI+1)/fcs.length*100)+'%';
}
function updateFCStats(){
  const total=fcConf.easy+fcConf.medium+fcConf.hard;
  if(!total)return;
  document.getElementById('fc-stats').style.display='block';
  document.getElementById('fc-stats-inner').innerHTML=`
    <span style="color:var(--success)">‚úì Got it: ${fcConf.easy}</span> &nbsp;¬∑&nbsp;
    <span style="color:var(--warn)">‚âà Unsure: ${fcConf.medium}</span> &nbsp;¬∑&nbsp;
    <span style="color:var(--danger)">‚úï Review: ${fcConf.hard}</span> &nbsp;¬∑&nbsp;
    Score: <strong style="color:var(--accent)">${Math.round(fcConf.easy/total*100)}%</strong>`;
}
function flipFC(){document.getElementById('fc-card').classList.toggle('flipped');}
function fcNext(){fcI=(fcI+1)%fcs.length;renderFC();}
function fcPrev(){fcI=(fcI-1+fcs.length)%fcs.length;renderFC();}
document.addEventListener('keydown',e=>{
  if(!document.getElementById('page-flashcards').classList.contains('active'))return;
  if(e.key==='ArrowRight')fcNext();else if(e.key==='ArrowLeft')fcPrev();
  else if(e.key===' '){e.preventDefault();flipFC();}
});

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   NOTES
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let notes=JSON.parse(localStorage.getItem('learnai-notes')||'[]');
let editingNoteId=null;
function saveNote(id,title,content){
  if(id===null){
    const n={id:Date.now(),title:title||'Untitled Note',content,date:new Date().toLocaleDateString()};
    notes.unshift(n);
  } else {
    const n=notes.find(x=>x.id===id);if(n){n.title=title;n.content=content;n.date=new Date().toLocaleDateString();}
  }
  localStorage.setItem('learnai-notes',JSON.stringify(notes));
  renderNotes();
}
function renderNotes(){
  const el=document.getElementById('notes-list');
  if(!notes.length){el.innerHTML='<div class="empty"><div class="e-ico">üìì</div>No notes yet ‚Äî create one or save a summary!</div>';return;}
  el.innerHTML=notes.map(n=>`
    <div class="note-card" data-id="${n.id}">
      <div class="note-title">${n.title} <span class="note-date">${n.date}</span></div>
      <div class="note-preview">${n.content.substring(0,100)}‚Ä¶</div>
    </div>`).join('');
  el.querySelectorAll('.note-card').forEach(card=>{
    card.addEventListener('click',()=>openNoteEditor(parseInt(card.dataset.id)));
  });
}
function openNoteEditor(id){
  const note=notes.find(n=>n.id===id);if(!note)return;
  editingNoteId=id;
  document.getElementById('note-editor-title').textContent=note.title;
  document.getElementById('note-content').value=note.content;
  const isAr=isArabicText(note.content);
  applyDir(document.getElementById('note-content'),isAr);
  document.getElementById('note-editor').style.display='block';
  document.getElementById('note-editor').scrollIntoView({behavior:'smooth'});
  document.getElementById('note-saved-msg').style.display='none';
}
document.getElementById('note-new-btn').addEventListener('click',()=>{
  const title=document.getElementById('note-title-in').value.trim()||('Note '+new Date().toLocaleDateString());
  saveNote(null,title,'');
  document.getElementById('note-title-in').value='';
  openNoteEditor(notes[0].id);
  addXP(5,'note created');unlockAch('note');
});
document.getElementById('note-save-btn').addEventListener('click',()=>{
  if(editingNoteId===null)return;
  const content=document.getElementById('note-content').value;
  const note=notes.find(n=>n.id===editingNoteId);
  saveNote(editingNoteId,note?.title||'Note',content);
  document.getElementById('note-saved-msg').style.display='inline';
  showToast('Note saved!','success');
  addXP(3,'note saved');
});
document.getElementById('note-close-btn').addEventListener('click',()=>{
  document.getElementById('note-editor').style.display='none';editingNoteId=null;
});
document.getElementById('note-delete-btn').addEventListener('click',()=>{
  if(editingNoteId===null)return;
  notes=notes.filter(n=>n.id!==editingNoteId);
  localStorage.setItem('learnai-notes',JSON.stringify(notes));
  renderNotes();document.getElementById('note-editor').style.display='none';
  showToast('Note deleted.','info');
});
document.getElementById('note-content').addEventListener('input',e=>{
  const isAr=isArabicText(e.target.value.substring(0,50));
  applyDir(e.target,isAr);
});
renderNotes();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GOALS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let goals=JSON.parse(localStorage.getItem('learnai-goals')||'[]');
const PRIORITY_COLOR={high:'var(--danger)',medium:'var(--warn)',low:'var(--success)'};
const PRIORITY_ICON={high:'üî¥',medium:'üü°',low:'üü¢'};
document.getElementById('add-goal-btn').addEventListener('click',addGoal);
document.getElementById('new-goal').addEventListener('keydown',e=>{if(e.key==='Enter')addGoal();});
function addGoal(){
  const t=document.getElementById('new-goal').value.trim();
  const p=document.getElementById('goal-priority').value;
  if(!t){showToast('Enter a goal.','warn');return;}
  goals.push({t,done:false,p});localStorage.setItem('learnai-goals',JSON.stringify(goals));
  document.getElementById('new-goal').value='';renderGoals();addXP(5,'goal added');
}
function renderGoals(){
  const el=document.getElementById('goals-list');el.innerHTML='';
  if(!goals.length){el.innerHTML='<div class="empty"><div class="e-ico">üéØ</div>No goals yet!</div>';document.getElementById('goals-div').style.display='none';document.getElementById('goals-sum').style.display='none';return;}
  // Sort: incomplete first, then by priority
  const order={high:0,medium:1,low:2};
  const sorted=[...goals].sort((a,b)=>a.done-b.done||order[a.p||'medium']-order[b.p||'medium']);
  sorted.forEach((g,si)=>{
    const ri=goals.indexOf(g);
    const d=document.createElement('div');d.className='goal-row';
    d.innerHTML=`<div class="g-chk ${g.done?'on':''}" data-i="${ri}"></div><span class="g-txt ${g.done?'done':''}">${PRIORITY_ICON[g.p||'medium']} ${g.t}</span><button class="btn btn-danger" data-i="${ri}" style="flex-shrink:0">‚úï</button>`;
    d.querySelector('.g-chk').addEventListener('click',()=>toggleGoal(ri));
    d.querySelector('button').addEventListener('click',()=>rmGoal(ri));
    el.appendChild(d);
  });
  const done=goals.filter(g=>g.done).length,pct=Math.round(done/goals.length*100);
  document.getElementById('goals-div').style.display='block';
  document.getElementById('goals-sum').style.display='block';
  document.getElementById('goals-sum').innerHTML=`${done}/${goals.length} completed (${pct}%)<div class="prog-bar" style="margin-top:8px"><div class="prog-fill" style="width:${pct}%"></div></div>`;
}
function toggleGoal(i){if(!goals[i].done){addXP(25,'goal completed üéØ');unlockAch('goal');}goals[i].done=!goals[i].done;localStorage.setItem('learnai-goals',JSON.stringify(goals));renderGoals();}
function rmGoal(i){goals.splice(i,1);localStorage.setItem('learnai-goals',JSON.stringify(goals));renderGoals();}
renderGoals();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   POMODORO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let pomStats=JSON.parse(localStorage.getItem('learnai-pom')||'{"s":0,"m":0,"d":"","cal":[]}');
const TODAY=new Date().toDateString();
if(pomStats.d!==TODAY){pomStats.s=0;pomStats.m=0;pomStats.d=TODAY;localStorage.setItem('learnai-pom',JSON.stringify(pomStats));}
let pomInt=null,pomOn=false,pomSecs=25*60,pomWork=true,pomDone=0;
const CIRCUM=515.22;
function pomUpdate(){
  const m=String(Math.floor(pomSecs/60)).padStart(2,'0'),s=String(pomSecs%60).padStart(2,'0');
  document.getElementById('pom-disp').textContent=`${m}:${s}`;
  document.title=pomOn?`${m}:${s} ‚Äî ${pomWork?'Focus':'Break'}`:'LearnAI';
  const tot=pomWork?parseInt(document.getElementById('pom-w').value)*60:parseInt(document.getElementById('pom-b').value)*60;
  document.getElementById('pom-ring').style.strokeDashoffset=CIRCUM*(1-pomSecs/tot);
}
// Mode pills
document.querySelectorAll('.mode-pill').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.mode-pill').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const w=parseInt(btn.dataset.w),b2=parseInt(btn.dataset.b);
    const isCustom=btn.textContent.includes('Custom');
    document.getElementById('pom-custom-row').style.display=isCustom?'grid':'none';
    if(!isCustom){document.getElementById('pom-w').value=w;document.getElementById('pom-b').value=b2;}
    pomReset();
  });
});
document.getElementById('pom-start').addEventListener('click',pomToggle);
document.getElementById('pom-reset').addEventListener('click',pomReset);
function pomToggle(){
  if(pomOn){clearInterval(pomInt);pomOn=false;document.getElementById('pom-start').textContent='‚ñ∂ Resume';}
  else{
    pomOn=true;document.getElementById('pom-start').textContent='‚è∏ Pause';
    pomInt=setInterval(()=>{
      if(pomSecs<=0){
        clearInterval(pomInt);pomOn=false;
        if(pomWork){
          pomDone++;pomStats.s++;pomStats.m+=parseInt(document.getElementById('pom-w').value);
          pomStats.d=TODAY;
          pomStats.cal=pomStats.cal||[];
          pomStats.cal.push(new Date().toDateString());
          pomStats.cal=pomStats.cal.slice(-21);
          localStorage.setItem('learnai-pom',JSON.stringify(pomStats));
          document.getElementById('pom-tot-s').textContent=pomStats.s;
          document.getElementById('pom-tot-m').textContent=pomStats.m;
          const bestStreak=Math.max(pomStats.bestPomStreak||0,pomDone);
          pomStats.bestPomStreak=bestStreak;
          document.getElementById('pom-streak-s').textContent=bestStreak;
          addXP(30,'focus session complete üéâ');
          showToast('Focus session done! Take a break üéâ','success');
          renderStreakCal();
          if(pomStats.s>=3)unlockAch('pom3');
        } else showToast('Break over! Time to focus üí™','info');
        document.getElementById('pom-sess').textContent=Math.min(pomDone,4);
        document.querySelectorAll('.pom-dot').forEach((d,i)=>d.classList.toggle('done',i<pomDone));
        pomWork=!pomWork;document.getElementById('pom-mode').textContent=pomWork?'Focus':'Break';
        pomSecs=parseInt((pomWork?document.getElementById('pom-w'):document.getElementById('pom-b')).value)*60;
        pomUpdate();document.getElementById('pom-start').textContent='‚ñ∂ Start';
      } else {pomSecs--;pomUpdate();}
    },1000);
  }
}
function pomReset(){clearInterval(pomInt);pomOn=false;pomWork=true;pomSecs=parseInt(document.getElementById('pom-w').value)*60;document.getElementById('pom-mode').textContent='Focus';document.getElementById('pom-start').textContent='‚ñ∂ Start';document.title='LearnAI';pomUpdate();}
['pom-w','pom-b'].forEach(id=>document.getElementById(id).addEventListener('change',pomReset));
document.getElementById('pom-tot-s').textContent=pomStats.s;
document.getElementById('pom-tot-m').textContent=pomStats.m;
document.getElementById('pom-streak-s').textContent=pomStats.bestPomStreak||0;
pomUpdate();
function renderStreakCal(){
  const cal=document.getElementById('streak-cal');
  const days=pomStats.cal||[];
  const today=new Date().toDateString();
  cal.innerHTML=Array.from({length:21},(_,i)=>{
    const d=new Date(Date.now()-(20-i)*86400000).toDateString();
    const active=days.includes(d);
    const isToday=d===today;
    return `<div class="streak-day ${active?'active':''} ${isToday?'today':''}" title="${d}"></div>`;
  }).join('');
}
renderStreakCal();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   WELCOME
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
(function(){
  const isNew=!localStorage.getItem('learnai-visited');
  if(isNew){
    localStorage.setItem('learnai-visited','1');
    setTimeout(()=>showToast('Welcome to LearnAI! üéì Arabic & English supported üåê','info'),1200);
  } else {
    const _xp=JSON.parse(localStorage.getItem('learnai-xp')||'{"xp":0,"completedCourses":[]}');
    const _subs=JSON.parse(localStorage.getItem('learnai-subs')||'[]').length;
    const _goals=JSON.parse(localStorage.getItem('learnai-goals')||'[]').length;
    const _notes=JSON.parse(localStorage.getItem('learnai-notes')||'[]').length;
    const _done=(_xp.completedCourses||[]).length;
    setTimeout(()=>showToast(`Welcome back! ‚úÖ ${_done} courses ¬∑ ${_subs} subjects ¬∑ ${_goals} goals ¬∑ ${_notes} notes ¬∑ ${_xp.xp} XP`,'success'),800);
  }
})();
</script>
</body>
</html>
